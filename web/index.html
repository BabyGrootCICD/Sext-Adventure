<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tsext Adventure: Halloween Haunt</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Courier New', monospace;
            background: linear-gradient(135deg, #1a1a2e, #16213e, #0f3460);
            color: #fff;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 20px;
        }

        .container {
            max-width: 800px;
            width: 100%;
            background: rgba(0, 0, 0, 0.8);
            border-radius: 15px;
            padding: 30px;
            box-shadow: 0 0 30px rgba(255, 107, 53, 0.3);
            border: 2px solid #ff6b35;
        }

        .header {
            text-align: center;
            margin-bottom: 30px;
        }

        .title {
            font-size: 2.5em;
            color: #ff6b35;
            text-shadow: 0 0 10px #ff6b35;
            margin-bottom: 10px;
        }

        .subtitle {
            font-size: 1.2em;
            color: #8b5cf6;
            margin-bottom: 20px;
        }

        .warning {
            background: rgba(255, 107, 53, 0.2);
            border: 1px solid #ff6b35;
            border-radius: 10px;
            padding: 15px;
            margin-bottom: 20px;
            text-align: center;
        }

        .game-area {
            min-height: 400px;
            background: rgba(0, 0, 0, 0.5);
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 20px;
            border: 1px solid #333;
        }

        .scene-title {
            font-size: 1.5em;
            color: #ff6b35;
            margin-bottom: 15px;
            text-align: center;
            border-bottom: 2px solid #ff6b35;
            padding-bottom: 10px;
        }

        .scene-description {
            font-size: 1.1em;
            line-height: 1.6;
            margin-bottom: 20px;
            color: #e0e0e0;
        }

        .choices {
            margin-top: 20px;
        }

        .choice {
            background: rgba(139, 92, 246, 0.2);
            border: 1px solid #8b5cf6;
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 1em;
            color: #fff;
            text-decoration: none;
            display: block;
            user-select: none;
            -webkit-user-select: none;
            /* æ”¹å–„è§¸æ§å›é¥‹ */
            -webkit-tap-highlight-color: rgba(139, 92, 246, 0.3);
            touch-action: manipulation;
        }

        .choice:hover {
            background: rgba(139, 92, 246, 0.4);
            transform: translateX(5px);
            box-shadow: 0 0 15px rgba(139, 92, 246, 0.5);
        }

        .ending {
            text-align: center;
            padding: 20px;
            background: rgba(255, 107, 53, 0.1);
            border-radius: 10px;
            border: 2px solid #ff6b35;
        }

        .ending-title {
            font-size: 1.8em;
            color: #ff6b35;
            margin-bottom: 15px;
        }

        .ending-outcome {
            font-size: 1.2em;
            line-height: 1.6;
            margin-bottom: 20px;
        }

        .score {
            font-size: 1.1em;
            color: #8b5cf6;
            margin-bottom: 15px;
        }

        .restart-btn {
            background: linear-gradient(45deg, #ff6b35, #8b5cf6);
            border: none;
            border-radius: 25px;
            padding: 12px 30px;
            color: white;
            font-size: 1.1em;
            cursor: pointer;
            transition: all 0.3s ease;
            margin: 10px;
        }

        .restart-btn:hover {
            transform: scale(1.05);
            box-shadow: 0 0 20px rgba(255, 107, 53, 0.5);
        }

        .start-screen {
            text-align: center;
        }

        .player-input {
            background: rgba(0, 0, 0, 0.5);
            border: 2px solid #8b5cf6;
            border-radius: 10px;
            padding: 15px;
            color: white;
            font-size: 1.1em;
            width: 100%;
            max-width: 300px;
            margin: 20px auto;
            text-align: center;
        }

        .start-btn {
            background: linear-gradient(45deg, #8b5cf6, #ff6b35);
            border: none;
            border-radius: 25px;
            padding: 15px 40px;
            color: white;
            font-size: 1.2em;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-top: 20px;
        }

        .start-btn:hover {
            transform: scale(1.05);
            box-shadow: 0 0 25px rgba(139, 92, 246, 0.5);
        }

        .start-btn:focus,
        .restart-btn:focus,
        .share-btn:focus,
        .close-btn:focus {
            outline: 2px solid #8b5cf6;
            outline-offset: 2px;
        }

        /* éµç›¤å°èˆªæ”¯æ´ */
        .choice:focus {
            outline: 2px solid #8b5cf6;
            outline-offset: 2px;
            background: rgba(139, 92, 246, 0.4);
        }

        .achievements-toggle:focus {
            outline: 2px solid #8b5cf6;
            outline-offset: 2px;
        }

        /* è¼‰å…¥ç‹€æ…‹æ”¹å–„ */
        .loading {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }

        .loading::after {
            content: '';
            width: 20px;
            height: 20px;
            border: 2px solid #8b5cf6;
            border-top: 2px solid transparent;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* æ•ˆèƒ½å„ªåŒ– */
        * {
            box-sizing: border-box;
        }

        .container,
        .game-area,
        .achievement-popup {
            will-change: transform;
            backface-visibility: hidden;
        }

        /* é˜²æ­¢æ–‡å­—é¸å– */
        .achievement-popup,
        .stats-panel,
        .achievements-panel {
            user-select: none;
            -webkit-user-select: none;
        }

        .footer {
            text-align: center;
            margin-top: 30px;
            color: #666;
            font-size: 0.9em;
        }

        .achievement-popup {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: linear-gradient(135deg, #1a1a2e, #16213e);
            border: 3px solid #ff6b35;
            border-radius: 15px;
            padding: 30px;
            z-index: 1000;
            text-align: center;
            box-shadow: 0 0 50px rgba(255, 107, 53, 0.5);
            animation: achievementPop 0.5s ease-out;
        }

        @keyframes achievementPop {
            0% { transform: translate(-50%, -50%) scale(0.5); opacity: 0; }
            50% { transform: translate(-50%, -50%) scale(1.1); opacity: 0.8; }
            100% { transform: translate(-50%, -50%) scale(1); opacity: 1; }
        }

        .achievement-icon {
            font-size: 4em;
            margin-bottom: 15px;
            animation: bounce 1s infinite;
        }

        @keyframes bounce {
            0%, 20%, 50%, 80%, 100% { transform: translateY(0); }
            40% { transform: translateY(-10px); }
            60% { transform: translateY(-5px); }
        }

        .achievement-title {
            font-size: 1.8em;
            color: #ff6b35;
            margin-bottom: 10px;
            font-weight: bold;
        }

        .achievement-description {
            font-size: 1.1em;
            color: #e0e0e0;
            margin-bottom: 20px;
        }

        .achievement-rarity {
            font-size: 1em;
            padding: 5px 15px;
            border-radius: 20px;
            margin-bottom: 20px;
            font-weight: bold;
        }

        .rarity-common { background: #9CA3AF; color: #000; }
        .rarity-rare { background: #3B82F6; color: #fff; }
        .rarity-epic { background: #8B5CF6; color: #fff; }
        .rarity-legendary { background: #F59E0B; color: #000; }

        .achievement-actions {
            display: flex;
            gap: 15px;
            justify-content: center;
            flex-wrap: wrap;
        }

        .share-btn {
            background: linear-gradient(45deg, #ff6b35, #8b5cf6);
            border: none;
            border-radius: 25px;
            padding: 10px 20px;
            color: white;
            font-size: 1em;
            cursor: pointer;
            transition: all 0.3s ease;
            margin: 5px;
        }

        .share-btn:hover {
            transform: scale(1.05);
            box-shadow: 0 0 15px rgba(255, 107, 53, 0.5);
        }

        .close-btn {
            background: #666;
            border: none;
            border-radius: 25px;
            padding: 10px 20px;
            color: white;
            font-size: 1em;
            cursor: pointer;
            transition: all 0.3s ease;
            margin: 5px;
        }

        .close-btn:hover {
            background: #888;
            transform: scale(1.05);
        }

        .achievements-panel {
            position: fixed;
            top: 20px;
            right: -320px;
            background: rgba(0, 0, 0, 0.95);
            border: 2px solid #8b5cf6;
            border-radius: 10px 0 0 10px;
            padding: 15px;
            z-index: 100;
            max-width: 300px;
            width: 300px;
            max-height: 80vh;
            overflow-y: auto;
            transition: right 0.3s ease;
            box-shadow: -5px 0 15px rgba(0, 0, 0, 0.5);
        }

        .achievements-panel.open {
            right: 0;
        }

        .achievements-toggle {
            position: fixed;
            top: 50%;
            right: 0;
            transform: translateY(-50%);
            background: linear-gradient(135deg, #8b5cf6, #ff6b35);
            border: 2px solid #8b5cf6;
            border-right: none;
            border-radius: 10px 0 0 10px;
            padding: 15px 10px;
            cursor: pointer;
            z-index: 101;
            transition: all 0.3s ease;
            writing-mode: vertical-rl;
            text-orientation: mixed;
            font-weight: bold;
            color: white;
            font-size: 1em;
        }

        .achievements-toggle:hover {
            padding-left: 15px;
            box-shadow: -5px 0 15px rgba(139, 92, 246, 0.5);
        }

        .achievements-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 2px solid #8b5cf6;
        }

        .achievements-title {
            font-size: 1.2em;
            color: #8b5cf6;
            font-weight: bold;
        }

        .achievements-close {
            background: transparent;
            border: none;
            color: #ff6b35;
            font-size: 1.5em;
            cursor: pointer;
            padding: 0;
            width: 30px;
            height: 30px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 5px;
            transition: all 0.3s ease;
        }

        .achievements-close:hover {
            background: rgba(255, 107, 53, 0.2);
            transform: rotate(90deg);
        }

        .achievement-item {
            display: flex;
            align-items: center;
            margin-bottom: 10px;
            padding: 10px;
            border-radius: 8px;
            background: rgba(139, 92, 246, 0.1);
            border: 1px solid rgba(139, 92, 246, 0.3);
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .achievement-item:hover {
            background: rgba(139, 92, 246, 0.2);
            transform: translateX(5px);
            border-color: rgba(139, 92, 246, 0.5);
        }

        .achievement-item.unlocked {
            background: rgba(255, 107, 53, 0.2);
            border-color: rgba(255, 107, 53, 0.5);
        }

        .achievement-item.unlocked:hover {
            background: rgba(255, 107, 53, 0.3);
            box-shadow: 0 0 10px rgba(255, 107, 53, 0.3);
        }

        .achievement-item-icon {
            font-size: 2em;
            margin-right: 12px;
            min-width: 40px;
            text-align: center;
        }

        .achievement-item-text {
            flex: 1;
        }

        .achievement-item-name {
            font-size: 0.95em;
            color: #fff;
            font-weight: bold;
            margin-bottom: 3px;
        }

        .achievement-item-desc {
            font-size: 0.8em;
            color: #ccc;
            line-height: 1.3;
        }

        .stats-panel {
            position: fixed;
            top: 20px;
            left: 20px;
            background: rgba(0, 0, 0, 0.95);
            border: 2px solid #ff6b35;
            border-radius: 10px;
            padding: 15px;
            z-index: 100;
            min-width: 200px;
            box-shadow: 5px 0 15px rgba(0, 0, 0, 0.5);
        }

        .stats-title {
            font-size: 1.2em;
            color: #ff6b35;
            margin-bottom: 10px;
            text-align: center;
            font-weight: bold;
        }

        .stat-item {
            display: flex;
            justify-content: space-between;
            margin-bottom: 8px;
            color: #e0e0e0;
            padding: 5px;
            border-radius: 5px;
            background: rgba(255, 107, 53, 0.1);
        }

        .stat-item span:first-child {
            font-weight: 600;
        }

        .stat-item span:last-child {
            color: #ff6b35;
            font-weight: bold;
        }

        .overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7);
            z-index: 999;
        }

        .loading {
            text-align: center;
            color: #8b5cf6;
            font-size: 1.2em;
        }

        /* RWD - å¤§å‹è¢å¹• */
        @media (min-width: 1200px) {
            .container {
                max-width: 1000px;
            }

            .title {
                font-size: 3em;
            }

            .achievements-panel {
                width: 350px;
                right: -370px;
            }

            .stats-panel {
                min-width: 220px;
            }
        }

        /* RWD - å¹³æ¿å’Œå°è¢å¹• */
        @media (max-width: 1024px) {
            .stats-panel {
                top: 10px;
                left: 10px;
                min-width: 150px;
                font-size: 0.9em;
            }

            .achievements-panel {
                width: 250px;
                right: -270px;
            }

            .achievements-toggle {
                font-size: 0.9em;
                padding: 12px 8px;
            }

            /* æ”¹å–„æŒ‰éˆ•è§¸æ§å€åŸŸ */
            .choice {
                padding: 18px;
                margin-bottom: 12px;
                font-size: 1em;
            }

            .start-btn, .restart-btn {
                padding: 15px 35px;
                font-size: 1.1em;
                min-height: 50px;
            }
        }

        /* RWD - æ‰‹æ©Ÿæ©«å‘ */
        @media (max-width: 768px) {
            .container {
                padding: 15px;
                margin: 5px;
                width: calc(100% - 10px);
            }
            
            .title {
                font-size: 1.8em;
                line-height: 1.2;
                margin-bottom: 15px;
            }

            .subtitle {
                font-size: 1em;
                line-height: 1.4;
                margin-bottom: 15px;
            }

            .warning {
                font-size: 0.9em;
                padding: 12px;
                margin-bottom: 15px;
            }
            
            .scene-title {
                font-size: 1.2em;
                line-height: 1.3;
                padding-bottom: 8px;
            }

            .scene-description {
                font-size: 1em;
                line-height: 1.5;
                margin-bottom: 15px;
            }

            .choice {
                font-size: 0.95em;
                padding: 15px;
                margin-bottom: 10px;
                border-radius: 10px;
                /* æ”¹å–„è§¸æ§é«”é©— */
                min-height: 50px;
                display: flex;
                align-items: center;
                cursor: pointer;
                -webkit-tap-highlight-color: rgba(139, 92, 246, 0.3);
            }

            .choice:active {
                transform: translateX(3px) scale(0.98);
                background: rgba(139, 92, 246, 0.6);
            }

            .stats-panel {
                top: 10px;
                left: 10px;
                min-width: 120px;
                font-size: 0.85em;
                padding: 10px;
                border-radius: 8px;
            }

            .stats-title {
                font-size: 1em;
                margin-bottom: 8px;
            }

            .stat-item {
                font-size: 0.85em;
                margin-bottom: 5px;
                padding: 3px 5px;
            }

            .achievements-panel {
                width: 220px;
                right: -240px;
                max-height: 70vh;
                border-radius: 10px 0 0 10px;
            }

            .achievements-toggle {
                font-size: 0.85em;
                padding: 10px 6px;
                border-radius: 8px 0 0 8px;
            }

            .achievement-popup {
                width: 90%;
                max-width: 350px;
                padding: 20px;
                max-height: 80vh;
                overflow-y: auto;
            }

            .achievement-icon {
                font-size: 3em;
                margin-bottom: 10px;
            }

            .achievement-title {
                font-size: 1.5em;
                line-height: 1.2;
                margin-bottom: 8px;
            }

            .achievement-description {
                font-size: 0.95em;
                line-height: 1.4;
            }

            .share-btn, .close-btn {
                font-size: 0.9em;
                padding: 10px 18px;
                border-radius: 20px;
                margin: 5px;
                min-height: 40px;
                /* æ”¹å–„è§¸æ§é«”é©— */
                -webkit-tap-highlight-color: transparent;
            }

            .share-btn:active, .close-btn:active {
                transform: scale(0.95);
            }

            .player-input {
                font-size: 1em;
                padding: 12px;
                border-radius: 8px;
                width: 90%;
            }

            .start-btn, .restart-btn {
                font-size: 1em;
                padding: 12px 25px;
                border-radius: 20px;
                min-height: 45px;
                margin: 10px 5px;
            }
        }

        /* RWD - æ‰‹æ©Ÿç›´å‘ */
        @media (max-width: 480px) {
            body {
                padding: 10px;
            }

            .container {
                padding: 12px;
                margin: 0;
                width: 100%;
                max-width: none;
                border-radius: 10px;
                box-shadow: 0 0 20px rgba(255, 107, 53, 0.2);
            }

            .header {
                margin-bottom: 20px;
            }

            .title {
                font-size: 1.4em;
                line-height: 1.1;
                margin-bottom: 8px;
                text-shadow: 0 0 8px #ff6b35;
            }

            .subtitle {
                font-size: 0.9em;
                line-height: 1.3;
                margin-bottom: 12px;
            }

            .warning {
                font-size: 0.85em;
                padding: 10px;
                border-radius: 8px;
                margin-bottom: 15px;
                line-height: 1.3;
            }

            .game-area {
                padding: 15px;
                min-height: 300px;
                border-radius: 8px;
                margin-bottom: 15px;
            }

            .scene-title {
                font-size: 1.1em;
                line-height: 1.2;
                margin-bottom: 10px;
                padding-bottom: 8px;
            }

            .scene-description {
                font-size: 0.9em;
                line-height: 1.4;
                margin-bottom: 15px;
            }

            .choices {
                margin-top: 15px;
            }

            .choice {
                font-size: 0.85em;
                padding: 12px;
                margin-bottom: 8px;
                border-radius: 8px;
                line-height: 1.3;
                min-height: 45px;
                display: flex;
                align-items: center;
                text-align: left;
                /* å„ªåŒ–å°è¢å¹•è§¸æ§ */
                -webkit-tap-highlight-color: rgba(139, 92, 246, 0.2);
                touch-action: manipulation;
            }

            .choice:hover {
                transform: translateX(2px);
            }

            .choice:active {
                transform: translateX(1px) scale(0.98);
            }

            .stats-panel {
                position: relative;
                top: 0;
                left: 0;
                width: 100%;
                margin-bottom: 10px;
                box-sizing: border-box;
                border-radius: 8px;
                padding: 10px;
            }

            .stats-title {
                font-size: 0.9em;
                margin-bottom: 6px;
            }

            .stat-item {
                font-size: 0.8em;
                margin-bottom: 4px;
                padding: 2px 4px;
            }

            .achievements-panel {
                width: 90%;
                right: -95%;
                top: 60px;
                max-height: 65vh;
                border-radius: 8px 0 0 8px;
            }

            .achievements-toggle {
                top: 60%;
                font-size: 0.75em;
                padding: 8px 4px;
                border-radius: 6px 0 0 6px;
                writing-mode: vertical-rl;
            }

            .achievement-popup {
                width: 96%;
                padding: 15px;
                max-height: 85vh;
                border-radius: 12px;
                margin: 0 2%;
            }

            .achievement-icon {
                font-size: 2.5em;
                margin-bottom: 8px;
            }

            .achievement-title {
                font-size: 1.2em;
                line-height: 1.1;
                margin-bottom: 6px;
            }

            .achievement-description {
                font-size: 0.85em;
                line-height: 1.3;
                margin-bottom: 10px;
            }

            .achievement-rarity {
                font-size: 0.8em;
                padding: 4px 12px;
                margin-bottom: 15px;
            }

            .achievement-actions {
                flex-direction: column;
                gap: 8px;
            }

            .achievement-actions button {
                width: 100%;
                min-height: 42px;
                font-size: 0.85em;
                padding: 10px 15px;
                border-radius: 20px;
            }

            .player-input {
                width: 95%;
                max-width: 280px;
                font-size: 0.95em;
                padding: 10px;
                border-radius: 8px;
                margin: 15px auto;
            }

            .start-btn, .restart-btn {
                font-size: 0.95em;
                padding: 12px 25px;
                border-radius: 20px;
                min-height: 45px;
                margin: 8px 4px;
            }

            .ending {
                padding: 15px;
                border-radius: 8px;
                margin-top: 15px;
            }

            .ending-title {
                font-size: 1.4em;
                line-height: 1.2;
                margin-bottom: 10px;
            }

            .ending-outcome {
                font-size: 0.95em;
                line-height: 1.4;
                margin-bottom: 15px;
            }

            .score {
                font-size: 0.9em;
                margin-bottom: 10px;
            }

            .footer {
                margin-top: 20px;
                font-size: 0.8em;
                line-height: 1.3;
            }

            .footer a {
                color: #8b5cf6;
                text-decoration: none;
            }

            .footer a:hover {
                text-decoration: underline;
            }
        }

        /* RWD - è¶…å°è¢å¹• (320px - 360px) */
        @media (max-width: 360px) {
            body {
                padding: 5px;
            }

            .container {
                padding: 8px;
                border-radius: 8px;
            }

            .title {
                font-size: 1.2em;
                line-height: 1.1;
                margin-bottom: 6px;
            }

            .subtitle {
                font-size: 0.85em;
                margin-bottom: 10px;
            }

            .warning {
                font-size: 0.8em;
                padding: 8px;
                margin-bottom: 12px;
            }

            .game-area {
                padding: 12px;
                min-height: 250px;
            }

            .scene-title {
                font-size: 1em;
                line-height: 1.1;
                margin-bottom: 8px;
                padding-bottom: 6px;
            }

            .scene-description {
                font-size: 0.85em;
                line-height: 1.4;
                margin-bottom: 12px;
            }

            .choice {
                font-size: 0.8em;
                padding: 10px;
                margin-bottom: 6px;
                min-height: 40px;
                border-radius: 6px;
            }

            .stats-panel {
                font-size: 0.75em;
                padding: 8px;
            }

            .stats-title {
                font-size: 0.85em;
                margin-bottom: 5px;
            }

            .stat-item {
                font-size: 0.75em;
                margin-bottom: 3px;
                padding: 1px 3px;
            }

            .achievement-popup {
                width: 98%;
                padding: 12px;
                margin: 0 1%;
            }

            .achievement-icon {
                font-size: 2.2em;
            }

            .achievement-title {
                font-size: 1.1em;
            }

            .achievement-description {
                font-size: 0.8em;
            }

            .achievement-actions button {
                font-size: 0.8em;
                padding: 8px 12px;
                min-height: 38px;
            }

            .player-input {
                font-size: 0.9em;
                padding: 8px;
                width: 98%;
                max-width: 250px;
            }

            .start-btn, .restart-btn {
                font-size: 0.9em;
                padding: 10px 20px;
                min-height: 42px;
            }

            .ending-title {
                font-size: 1.2em;
            }

            .ending-outcome {
                font-size: 0.9em;
            }

            .footer {
                font-size: 0.75em;
                margin-top: 15px;
            }
        }

        /* è¼”åŠ©åŠŸèƒ½æ”¹å–„ */
        @media (prefers-reduced-motion: reduce) {
            * {
                animation-duration: 0.01ms !important;
                animation-iteration-count: 1 !important;
                transition-duration: 0.01ms !important;
            }
            
            .choice:hover,
            .choice:active {
                transform: none;
            }
        }

        /* é«˜å°æ¯”åº¦æ¨¡å¼æ”¯æ´ */
        @media (prefers-contrast: high) {
            .container {
                border: 3px solid #fff;
                background: rgba(0, 0, 0, 0.95);
            }
            
            .choice {
                border: 2px solid #fff;
                background: rgba(139, 92, 246, 0.8);
            }
            
            .achievement-popup {
                border: 3px solid #fff;
                background: rgba(0, 0, 0, 0.95);
            }
        }

        /* æš—è‰²ä¸»é¡Œåå¥½ */
        @media (prefers-color-scheme: dark) {
            /* æœ¬éŠæˆ²é è¨­å°±æ˜¯æš—è‰²ä¸»é¡Œï¼Œæ‰€ä»¥ä¸éœ€è¦é¡å¤–èª¿æ•´ */
        }

        /* æ²è»¸æ¨£å¼ */
        .achievements-panel::-webkit-scrollbar {
            width: 8px;
        }

        .achievements-panel::-webkit-scrollbar-track {
            background: rgba(0, 0, 0, 0.3);
            border-radius: 4px;
        }

        .achievements-panel::-webkit-scrollbar-thumb {
            background: #8b5cf6;
            border-radius: 4px;
        }

        .achievements-panel::-webkit-scrollbar-thumb:hover {
            background: #a78bfa;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1 class="title">ğŸƒ Tsext Adventure: Halloween Haunt ğŸƒ</h1>
            <p class="subtitle">è¬è–ç¯€ç‘Ÿç‘Ÿå†’éšªéŠæˆ²</p>
        </div>

        <div class="warning">
            âš ï¸ <strong>NSFW è­¦å‘Š</strong>ï¼šæœ¬éŠæˆ²åŒ…å«æˆäººæš—ç¤ºå’Œå¹½é»˜ï¼Œé©åˆ 18 æ­²ä»¥ä¸Šç©å®¶
        </div>

        <!-- çµ±è¨ˆé¢æ¿ -->
        <div class="stats-panel" id="statsPanel" style="display: none;">
            <div class="stats-title">ğŸ“Š éŠæˆ²çµ±è¨ˆ</div>
            <div class="stat-item">
                <span>ç¸½åˆ†æ•¸:</span>
                <span id="totalScore">0</span>
            </div>
            <div class="stat-item">
                <span>éŠç©æ¬¡æ•¸:</span>
                <span id="playCount">0</span>
            </div>
            <div class="stat-item">
                <span>è§£é–æˆå°±:</span>
                <span id="achievementCount">0</span>
            </div>
            <div class="stat-item">
                <span>æ¢ç´¢å ´æ™¯:</span>
                <span id="sceneCount">0</span>
            </div>
        </div>

        <!-- æˆå°±åˆ‡æ›æŒ‰éˆ• -->
        <div class="achievements-toggle" id="achievementsToggle" onclick="toggleAchievementsPanel()" style="display: none;">
            ğŸ† æˆå°±åˆ—è¡¨
        </div>

        <!-- æˆå°±é¢æ¿ -->
        <div class="achievements-panel" id="achievementsPanel">
            <div class="achievements-header">
                <div class="achievements-title">ğŸ† æˆå°±åˆ—è¡¨</div>
                <button class="achievements-close" onclick="toggleAchievementsPanel()">âœ•</button>
            </div>
            <div id="achievementsList"></div>
        </div>

        <div class="game-area" id="gameArea">
            <div class="start-screen" id="startScreen">
                <h2>ğŸ‘» æ­¡è¿ä¾†åˆ°è¬è–ç¯€éˆç•°ç´„æœƒè¶´ï¼</h2>
                <p>æº–å‚™å¥½åƒåŠ æœ€åˆºæ¿€çš„è¬è–ç¯€å†’éšªäº†å—ï¼Ÿ</p>
                <input type="text" class="player-input" id="playerName" placeholder="è«‹è¼¸å…¥ä½ çš„åå­—" maxlength="20">
                <br>
                <button class="start-btn" onclick="startGame()">é–‹å§‹å†’éšª ğŸƒ</button>
            </div>
        </div>

        <div class="footer">
            <p>ğŸƒ Happy Halloween! ğŸƒ</p>
            <p>é–‹æºå°ˆæ¡ˆ | MIT License | <a href="https://github.com/dennislee928/tsext-adventure" style="color: #8b5cf6;">GitHub</a></p>
        </div>
    </div>

    <script>
        // éŠæˆ²ç‹€æ…‹
        let gameState = {
            currentScene: 'start',
            playerName: '',
            score: 0,
            visitedScenes: new Set(),
            unlockedAchievements: new Set(),
            unlockedBadges: new Set(),
            playCount: 0,
            totalScore: 0,
            gameStartTime: null,
            allEndingsUnlocked: new Set(),
            allScenesVisited: new Set(),
            punsTriggered: new Set()
        };

        // æˆå°±è³‡æ–™
        const achievementsData = {
            "magic_knight": {
                "name": "é­”æ³•é¨å£«",
                "description": "èˆ‡å¥³å·«é”æˆå®Œç¾çµå±€",
                "icon": "ğŸ§™â€â™€ï¸",
                "rarity": "legendary",
                "condition": "ending_rooftop_romance",
                "points": 100
            },
            "moonlight_lover": {
                "name": "æœˆå…‰æˆ€äºº",
                "description": "åœ¨æœˆå…‰æ¹–åº¦éæµªæ¼«å¤œæ™š",
                "icon": "ğŸŒ™",
                "rarity": "epic",
                "condition": "ending_moonlight_adventure",
                "points": 90
            },
            "ghost_lover": {
                "name": "é¬¼é­‚æˆ€äºº",
                "description": "èˆ‡é¬¼é­‚é«”é©—å¥‡ç•°è¦ªå¯†",
                "icon": "ğŸ‘»",
                "rarity": "rare",
                "condition": "ending_ghost_intimacy",
                "points": 85
            },
            "pumpkin_master": {
                "name": "å—ç“œå¤§å¸«",
                "description": "åœ¨å—ç“œç”°ç™¼æ®å‰µæ„",
                "icon": "ğŸƒ",
                "rarity": "rare",
                "condition": "ending_big_pumpkin_fun",
                "points": 87
            },
            "field_lover": {
                "name": "ç”°é‡æˆ€äºº",
                "description": "èˆ‡è¾²å¤«å¥³éƒåº¦éæ¿€æƒ…å¤œæ™š",
                "icon": "ğŸŒ¾",
                "rarity": "epic",
                "condition": "ending_physical_attraction",
                "points": 90
            },
            "cat_friend": {
                "name": "è²“å’ªä¹‹å‹",
                "description": "èˆ‡é»‘è²“å’ªå’ªå»ºç«‹å‹èª¼",
                "icon": "ğŸ±",
                "rarity": "common",
                "condition": "ending_cat_adventure",
                "points": 60
            },
            "cat_lady_lover": {
                "name": "è²“å¥³æˆ€äºº",
                "description": "èˆ‡è²“å¥³è‰è‰åº¦éæµªæ¼«æ™‚å…‰",
                "icon": "ğŸ±â€ğŸ‘¤",
                "rarity": "rare",
                "condition": "ending_cat_lady_romance",
                "points": 80
            },
            "soul_mate": {
                "name": "å¿ƒéˆä¼´ä¾¶",
                "description": "èˆ‡è¾²å¤«å¥³éƒå»ºç«‹æƒ…æ„Ÿé€£æ¥",
                "icon": "ğŸ’•",
                "rarity": "rare",
                "condition": "ending_heart_to_heart",
                "points": 85
            },
            "passion_lover": {
                "name": "æ¿€æƒ…æˆ€äºº",
                "description": "é«”é©—ç«ç†±çš„æ¿€æƒ…å¤œæ™š",
                "icon": "ğŸ”¥",
                "rarity": "epic",
                "condition": "ending_physical_attraction",
                "points": 90
            },
            "cold_warrior": {
                "name": "å†°å†·æˆ°å£«",
                "description": "å‹‡æ•¢é¢å°é¬¼é­‚çš„å†°å†·è§¸æ‘¸",
                "icon": "â„ï¸",
                "rarity": "common",
                "condition": "ending_cold_encounter",
                "points": 70
            },
            "floating_fool": {
                "name": "æ¼‚æµ®å‚»ç“œ",
                "description": "å› ç‚ºç„¡ç¦®è€Œæ¼‚æµ®æ’å£åŠç‡ˆ",
                "icon": "ğŸ’¥",
                "rarity": "common",
                "condition": "ending_floating_mischief",
                "points": 30
            },
            // æ–°å¢çš„è²“å’ªç›¸é—œæˆå°±
            "magic_master": {
                "name": "é­”æ³•å¤§å¸«",
                "description": "èˆ‡å¥³å·«å’Œè²“å¥³ä¸€èµ·é«”é©—çµ‚æ¥µé­”æ³•",
                "icon": "ğŸ”®",
                "rarity": "legendary",
                "condition": "ending_witch_cat_threesome",
                "points": 120
            },
            // å¥³å·«é“æ­‰ç›¸é—œæˆå°±
            "magic_apprentice": {
                "name": "é­”æ³•å­¸å¾’",
                "description": "å­¸æœƒäº†é­”æ³•ä¸–ç•Œçš„åŸºæœ¬ç¦®å„€",
                "icon": "ğŸ“š",
                "rarity": "common",
                "condition": "ending_witch_lessons",
                "points": 65
            },
            "pure_heart": {
                "name": "ç´”å¿ƒé¨å£«",
                "description": "ç”¨ç´”æ½”çš„å¿ƒæ„è´å¾—å¥³å·«çš„æ„›",
                "icon": "ğŸŒ¹",
                "rarity": "epic",
                "condition": "ending_rose_blooms",
                "points": 95
            },
            "magic_student": {
                "name": "é­”æ³•è¦‹ç¿’ç”Ÿ",
                "description": "åœ¨å¥³å·«æŒ‡å°ä¸‹å­¸æœƒæ„›çš„çœŸè«¦",
                "icon": "ğŸ­",
                "rarity": "rare",
                "condition": "ending_magic_guidance",
                "points": 75
            },
            // é¬¼é­‚ç›¸é—œæ–°æˆå°±
            "soul_lover": {
                "name": "éˆé­‚æˆ€äºº",
                "description": "èˆ‡é¬¼é­‚é«”é©—è¶…è¶Šç”Ÿæ­»çš„çœŸæ„›",
                "icon": "ğŸ‘»ğŸ’–",
                "rarity": "epic",
                "condition": "ending_ghost_intimacy",
                "points": 88
            },
            "gentle_soul": {
                "name": "æº«æŸ”éˆé­‚",
                "description": "èˆ‡é¬¼é­‚å»ºç«‹æº«æŸ”æ·±åˆ»çš„è¯ç¹«",
                "icon": "ğŸ’«",
                "rarity": "rare",
                "condition": "ending_gentle_approach",
                "points": 82
            },
            "spirit_friend": {
                "name": "éˆç•Œä¹‹å‹",
                "description": "èˆ‡é¬¼é­‚å»ºç«‹è·¨ç•Œå‹èª¼",
                "icon": "ğŸ¤",
                "rarity": "rare",
                "condition": "ending_ghost_friendship",
                "points": 70
            },
            "understanding_master": {
                "name": "æºé€šå¤§å¸«",
                "description": "åŒ–è§£èª¤æœƒé”æˆç›¸äº’ç†è§£",
                "icon": "ğŸ¤—",
                "rarity": "rare",
                "condition": "ending_ghost_understanding",
                "points": 78
            },
            "brave_runner": {
                "name": "å‹‡æ•¢é€ƒè·‘è€…",
                "description": "é›–ç„¶ç‹¼ç‹½ä½†ç™¼ç¾é¬¼é­‚çš„å–„è‰¯",
                "icon": "ğŸƒâ€â™‚ï¸",
                "rarity": "common",
                "condition": "ending_final_chase",
                "points": 45
            },
            "heart_mentor": {
                "name": "å¿ƒéˆå°å¸«",
                "description": "ç”¨é™ªä¼´æ²»ç™’å­¤ç¨çš„å¿ƒéˆ",
                "icon": "ğŸ’¬",
                "rarity": "rare",
                "condition": "ending_ghost_conversation",
                "points": 73
            },
            // é¬¼é­‚ç‰¹æ®ŠæŠ€å·§æˆå°±
            "soul_master": {
                "name": "éˆé­‚å¤§å¸«",
                "description": "æŒæ¡éˆé­‚å…±é³´çš„çµ‚æ¥µå¥§ç¾©",
                "icon": "âœ¨",
                "rarity": "legendary",
                "condition": "ending_soul_resonance",
                "points": 110
            },
            "floating_master": {
                "name": "é£„æµ®å¤§å¸«",
                "description": "å­¸æœƒé£„æµ®è¡“è¶…è¶Šé‡åŠ›æŸç¸›",
                "icon": "ğŸŒŸ",
                "rarity": "epic",
                "condition": "ending_floating_lessons",
                "points": 92
            },
            "mind_piercer": {
                "name": "å¿ƒéˆç©¿é€å¸«",
                "description": "å­¸æœƒç©¿é€å¿ƒéˆéšœç¤™çš„èƒ½åŠ›",
                "icon": "ğŸšª",
                "rarity": "rare",
                "condition": "ending_wall_phasing",
                "points": 85
            },
            // å—ç“œé­”æ³•ç›¸é—œæˆå°±
            "earth_beloved": {
                "name": "å¤§åœ°å¯µå…’",
                "description": "ç²å¾—å¤§åœ°å¥³ç¥çš„æ°¸æ†çœ·é¡§",
                "icon": "ğŸŒ¸",
                "rarity": "legendary",
                "condition": "ending_purple_pumpkin_mystery",
                "points": 105
            },
            "heart_listener": {
                "name": "å¿ƒéˆå‚¾è½è€…",
                "description": "çœŸæ­£ç†è§£ä»–äººå…§å¿ƒçš„èƒ½åŠ›",
                "icon": "ğŸ’",
                "rarity": "rare",
                "condition": "ending_silver_pumpkin_wish",
                "points": 80
            },
            // åŸæœ‰æˆå°±
            "explorer": {
                "name": "æ¢ç´¢è€…",
                "description": "æ¢ç´¢äº†æ‰€æœ‰ä¸»è¦å ´æ™¯",
                "icon": "ğŸ—ºï¸",
                "rarity": "rare",
                "condition": "visited_all_scenes",
                "points": 50
            },
            "completionist": {
                "name": "å®Œç¾ä¸»ç¾©è€…",
                "description": "è§£é–äº†æ‰€æœ‰çµå±€",
                "icon": "ğŸ†",
                "rarity": "legendary",
                "condition": "all_endings_unlocked",
                "points": 200
            },
            "speed_demon": {
                "name": "é€Ÿåº¦æƒ¡é­”",
                "description": "åœ¨ 5 åˆ†é˜å…§å®ŒæˆéŠæˆ²",
                "icon": "âš¡",
                "rarity": "rare",
                "condition": "speed_run_5min",
                "points": 75
            },
            "pun_master": {
                "name": "é›™é—œèªå¤§å¸«",
                "description": "è§¸ç™¼äº†æ‰€æœ‰è¬è–ç¯€é›™é—œèª",
                "icon": "ğŸ˜„",
                "rarity": "epic",
                "condition": "all_puns_triggered",
                "points": 100
            },
            "romance_expert": {
                "name": "æµªæ¼«å°ˆå®¶",
                "description": "é”æˆæ‰€æœ‰æµªæ¼«çµå±€",
                "icon": "ğŸ’˜",
                "rarity": "rare",
                "condition": "all_romance_endings",
                "points": 80
            },
            "adventure_seeker": {
                "name": "å†’éšªå°‹æ±‚è€…",
                "description": "å˜—è©¦äº†æ‰€æœ‰å†’éšªé¸æ“‡",
                "icon": "ğŸ—¡ï¸",
                "rarity": "rare",
                "condition": "all_adventure_choices",
                "points": 70
            },
            "halloween_legend": {
                "name": "è¬è–ç¯€å‚³å¥‡",
                "description": "ç²å¾— 1000 åˆ†ä»¥ä¸Š",
                "icon": "ğŸƒğŸ‘‘",
                "rarity": "legendary",
                "condition": "score_1000_plus",
                "points": 300
            },
            // æ–°å¢çµ„åˆæˆå°±
            "cat_whisperer": {
                "name": "è²“èªè€…",
                "description": "è§£é–æ‰€æœ‰è²“å’ªç›¸é—œçµå±€",
                "icon": "ğŸ¾",
                "rarity": "epic",
                "condition": "all_cat_endings",
                "points": 150
            },
            "ghost_whisperer": {
                "name": "éˆèªè€…",
                "description": "è§£é–æ‰€æœ‰é¬¼é­‚ç›¸é—œçµå±€",
                "icon": "ğŸ‘»ğŸŒŸ",
                "rarity": "epic",
                "condition": "all_ghost_endings",
                "points": 160
            },
            "pumpkin_sage": {
                "name": "å—ç“œè³¢è€…",
                "description": "è§£é–æ‰€æœ‰å—ç“œé­”æ³•çµå±€",
                "icon": "ğŸƒğŸ”®",
                "rarity": "epic",
                "condition": "all_pumpkin_endings",
                "points": 140
            }
        };

        // å¾½ç« è³‡æ–™
        const badgesData = {
            "first_play": {
                "name": "åˆä¾†ä¹åˆ°",
                "description": "ç¬¬ä¸€æ¬¡éŠç©",
                "icon": "ğŸ‘¶",
                "rarity": "common"
            },
            "night_owl": {
                "name": "å¤œè²“å­",
                "description": "åœ¨æ·±å¤œæ™‚åˆ†éŠç©",
                "icon": "ğŸ¦‰",
                "rarity": "common"
            },
            "early_bird": {
                "name": "æ—©èµ·é³¥",
                "description": "åœ¨æ¸…æ™¨æ™‚åˆ†éŠç©",
                "icon": "ğŸ¦",
                "rarity": "common"
            },
            "weekend_warrior": {
                "name": "é€±æœ«æˆ°å£«",
                "description": "åœ¨é€±æœ«éŠç©",
                "icon": "âš”ï¸",
                "rarity": "common"
            },
            "repeat_player": {
                "name": "é‡è¤‡ç©å®¶",
                "description": "éŠç©è¶…é 5 æ¬¡",
                "icon": "ğŸ”„",
                "rarity": "rare"
            },
            "social_butterfly": {
                "name": "ç¤¾äº¤è´è¶",
                "description": "åˆ†äº«äº† 3 æ¬¡æˆå°±",
                "icon": "ğŸ¦‹",
                "rarity": "rare"
            },
            "perfectionist": {
                "name": "å®Œç¾ä¸»ç¾©è€…",
                "description": "å–®æ¬¡éŠæˆ²ç²å¾—æ»¿åˆ†",
                "icon": "ğŸ’¯",
                "rarity": "epic"
            },
            "lucky_charm": {
                "name": "å¹¸é‹ç¬¦",
                "description": "é€£çºŒ 3 æ¬¡ç²å¾—ç¨€æœ‰æˆå°±",
                "icon": "ğŸ€",
                "rarity": "epic"
            },
            "halloween_spirit": {
                "name": "è¬è–ç¯€ç²¾ç¥",
                "description": "åœ¨è¬è–ç¯€æœŸé–“éŠç©",
                "icon": "ğŸƒ",
                "rarity": "rare"
            },
            "midnight_magic": {
                "name": "åˆå¤œé­”æ³•",
                "description": "åœ¨åˆå¤œæ™‚åˆ†å®ŒæˆéŠæˆ²",
                "icon": "ğŸ•›",
                "rarity": "rare"
            }
        };

        // ç¤¾äº¤å¹³å°è³‡æ–™
        const socialPlatforms = {
            "twitter": {
                "name": "Twitter",
                "icon": "ğŸ¦",
                "url": "https://twitter.com/intent/tweet",
                "hashtags": ["TsextAdventure", "HalloweenHaunt", "NSFWGame"]
            },
            "facebook": {
                "name": "Facebook",
                "icon": "ğŸ“˜",
                "url": "https://www.facebook.com/sharer/sharer.php",
                "hashtags": ["TsextAdventure", "HalloweenHaunt"]
            },
            "instagram": {
                "name": "Instagram",
                "icon": "ğŸ“·",
                "url": "https://www.instagram.com/",
                "hashtags": ["#TsextAdventure", "#HalloweenHaunt", "#NSFWGame"]
            },
            "threads": {
                "name": "Threads",
                "icon": "ğŸ§µ",
                "url": "https://www.threads.net/intent/post",
                "hashtags": ["#TsextAdventure", "#HalloweenHaunt"]
            },
            "line": {
                "name": "LINE",
                "icon": "ğŸ’¬",
                "url": "https://social-plugins.line.me/lineit/share",
                "hashtags": ["TsextAdventure", "HalloweenHaunt"]
            },
            "discord": {
                "name": "Discord",
                "icon": "ğŸ’¬",
                "url": "https://discord.com/",
                "hashtags": ["TsextAdventure", "HalloweenHaunt"]
            },
            "reddit": {
                "name": "Reddit",
                "icon": "ğŸ¤–",
                "url": "https://reddit.com/submit",
                "hashtags": ["TsextAdventure", "HalloweenHaunt", "NSFWGame"]
            },
            "telegram": {
                "name": "Telegram",
                "icon": "âœˆï¸",
                "url": "https://t.me/share/url",
                "hashtags": ["TsextAdventure", "HalloweenHaunt"]
            }
        };

        // æ•…äº‹è³‡æ–™
        const storyData = {
            "start": {
                "title": "è¬è–ç¯€éˆç•°ç´„æœƒè¶´å…¥å£",
                "description": "ä½ ç«™åœ¨ä¸€æ£Ÿé™°æ£®çš„è€å®…å‰ï¼Œé–€å£æ›è‘—ã€Œæ­¡è¿åƒåŠ è¬è–ç¯€éˆç•°ç´„æœƒè¶´ã€çš„ç‰Œå­ã€‚æœˆå…‰é€éçƒé›²ç‘ä¸‹ï¼Œå—ç“œç‡ˆåœ¨é¢¨ä¸­æ–æ›³ï¼Œç™¼å‡ºè©­ç•°çš„å…‰èŠ’ã€‚\n\nä½ è½åˆ°å±‹å…§å‚³ä¾†ç¬‘è²ã€éŸ³æ¨‚è²ï¼Œé‚„æœ‰ä¸€äº›... å¥‡æ€ªçš„è²éŸ³ã€‚é–€å£ç«™è‘—ä¸€å€‹ç©¿è‘—æ€§æ„Ÿå¥³å·«è£çš„æ¥å¾…å“¡ï¼Œå¥¹å°ä½ çœ¨äº†çœ¨çœ¼ã€‚",
                "choices": [
                    {"option": "A: å°å¥³å·«èªªã€Œä½ çš„æƒå¸šçœŸæ¼‚äº®ï¼Œèƒ½é¨å—ï¼Ÿã€", "next_scene": "witch_encounter"},
                    {"option": "B: ç›´æ¥é€²å…¥é¬¼å±‹æ¢éšª", "next_scene": "haunted_house"},
                    {"option": "C: å…ˆå»å—ç“œç”°çœ‹çœ‹", "next_scene": "pumpkin_patch"}
                ]
            },
            "witch_encounter": {
                "title": "å¥³å·«çš„èª˜æƒ‘",
                "description": "å¥³å·«å’¯å’¯ç¬‘è‘—èªªï¼šã€Œç•¶ç„¶å¯ä»¥é¨ï¼Œä½†ä½ è¦å°å¿ƒä¸è¦è¢«æƒå¸šæŸ„... ä½ çŸ¥é“çš„ã€‚ã€å¥¹æ®äº†æ®æ‰‹ï¼Œæƒå¸šçªç„¶é£›åˆ°ä½ é¢å‰ã€‚\n\nã€Œä¸éï¼Œã€å¥¹ç¥ç§˜åœ°ç¬‘è‘—ï¼Œã€Œæˆ‘çš„æƒå¸šå¾ˆæŒ‘å‰”ï¼Œåªæœ‰çœŸæ­£å‹‡æ•¢çš„äººæ‰èƒ½é§•é¦­å®ƒã€‚ã€",
                "choices": [
                    {"option": "A: å‹‡æ•¢åœ°è·¨ä¸Šæƒå¸š", "next_scene": "broom_ride_success"},
                    {"option": "B: èªªã€Œæˆ‘æ›´æƒ³é¨ä½ ã€", "next_scene": "witch_rejection"},
                    {"option": "C: å•ã€Œä½ çš„è²“å’ªåœ¨å“ªè£¡ï¼Ÿã€", "next_scene": "cat_encounter"}
                ]
            },
            "broom_ride_success": {
                "title": "æƒå¸šé£›è¡ŒæˆåŠŸ",
                "description": "ä½ æˆåŠŸè·¨ä¸Šæƒå¸šï¼Œå®ƒè¼‰è‘—ä½ åœ¨æœˆå…‰ä¸‹é£›ç¿”ï¼å¥³å·«åœ¨ä¸‹é¢é¼“æŒï¼šã€Œå¤ªæ£’äº†ï¼ä½ æ˜¯æˆ‘è¦‹éæœ€å‹‡æ•¢çš„é¨å£«ï¼ã€\n\nä½ å€‘ä¸€èµ·é£›åˆ°å±‹é ‚ï¼Œçœ‹è‘—ä¸‹é¢çš„æ´¾å°ã€‚å¥³å·«é è¿‘ä½ ï¼Œè¼•è²èªªï¼šã€Œç¾åœ¨... è®“æˆ‘å€‘åšä¸€äº›æ›´åˆºæ¿€çš„äº‹æƒ…ã€‚ã€",
                "choices": [
                    {"option": "A: åœ¨å±‹é ‚ä¸Šè¦ªå»å¥³å·«", "next_scene": "rooftop_romance"},
                    {"option": "B: æè­°ä¸€èµ·é£›åˆ°æ›´é çš„åœ°æ–¹", "next_scene": "moonlight_adventure"}
                ]
            },
            "rooftop_romance": {
                "title": "å±‹é ‚æµªæ¼«",
                "description": "åœ¨æœˆå…‰ä¸‹ï¼Œä½ å’Œå¥³å·«åœ¨å±‹é ‚ä¸Šæ“å»ã€‚å¥¹çš„å˜´å”‡æº«æš–è€Œç”œèœœï¼Œå¸¶è‘—é­”æ³•çš„å‘³é“ã€‚çªç„¶ï¼Œå¥¹æ¨é–‹ä½ ï¼Œç¬‘è‘—èªªï¼šã€Œç¾åœ¨è®“æˆ‘å€‘åšä¸€äº›çœŸæ­£çš„é­”æ³•ï¼ã€\n\nå¥¹æ®å‹•é­”æ–ï¼Œä½ å€‘å‘¨åœå‡ºç¾äº†é–ƒçˆçš„æ˜Ÿæ˜Ÿï¼Œæ•´å€‹ä¸–ç•Œéƒ½è®Šå¾—æµªæ¼«èµ·ä¾†ã€‚",
                "is_ending": true,
                "outcome": "ğŸ‰ å®Œç¾çµå±€ï¼ä½ å’Œå¥³å·«åœ¨é­”æ³•æ˜Ÿå…‰ä¸‹åº¦éäº†é›£å¿˜çš„è¬è–ç¯€å¤œæ™šï¼\n\nä½ ç²å¾—äº†ã€é­”æ³•é¨å£«ã€çš„ç¨±è™Ÿï¼Œä¸¦ä¸”å­¸æœƒäº†çœŸæ­£çš„æ„›æƒ…é­”æ³•ã€‚",
                "score": 100
            },
            "moonlight_adventure": {
                "title": "æœˆå…‰å†’éšª",
                "description": "ä½ å€‘é£›åˆ°æ›´é çš„åœ°æ–¹ï¼Œä¾†åˆ°ä¸€å€‹éš±ç§˜çš„æœˆå…‰æ¹–ã€‚å¥³å·«èªªï¼šã€Œé€™è£¡æ˜¯æˆ‘çš„ç§˜å¯†èŠ±åœ’ï¼Œåªæœ‰çœŸæ­£ç‰¹åˆ¥çš„äººæ‰èƒ½ä¾†åˆ°é€™è£¡ã€‚ã€\n\nåœ¨æœˆå…‰ä¸‹ï¼Œä½ å€‘ä¸€èµ·æ¢ç´¢è‘—å½¼æ­¤çš„å…§å¿ƒï¼Œåº¦éäº†æœ€æµªæ¼«çš„å¤œæ™šã€‚",
                "is_ending": true,
                "outcome": "ğŸŒ™ æµªæ¼«çµå±€ï¼ä½ å’Œå¥³å·«åœ¨æœˆå…‰æ¹–åº¦éäº†æœ€ç¾å¥½çš„æ™‚å…‰ï¼\n\nä½ ç²å¾—äº†ã€æœˆå…‰æˆ€äººã€çš„ç¨±è™Ÿï¼Œä¸¦ä¸”æ°¸é è¨˜ä½äº†é€™å€‹ç¥å¥‡çš„å¤œæ™šã€‚",
                "score": 90
            },
            "witch_rejection": {
                "title": "å¥³å·«çš„æ‹’çµ•",
                "description": "å¥³å·«çšºèµ·çœ‰é ­ï¼šã€Œä½ ä»¥ç‚ºæˆ‘æ˜¯ä»€éº¼ï¼Ÿéš¨ä¾¿çš„å¥³å·«å—ï¼Ÿã€å¥¹æ®å‹•é­”æ–ï¼Œä½ çªç„¶æ„Ÿè¦ºèº«é«”è®Šè¼•äº†...\n\nã€Œæ—¢ç„¶ä½ é€™éº¼ç„¡ç¦®ï¼Œå°±è®“ä½ é«”é©—ä¸€ä¸‹çœŸæ­£çš„ã€è¼•å¦‚ç¾½æ¯›ã€å§ï¼ã€ä½ é–‹å§‹é£„æµ®åœ¨ç©ºä¸­ï¼Œç„¡æ³•æ§åˆ¶æ–¹å‘ã€‚",
                "choices": [
                    {"option": "A: é“æ­‰ä¸¦è«‹æ±‚åŸè«’", "next_scene": "apology_accepted"},
                    {"option": "B: è©¦åœ–æŠ“ä½ä»€éº¼æ±è¥¿", "next_scene": "floating_mischief"}
                ]
            },
            "floating_mischief": {
                "title": "æ¼‚æµ®æƒ¡ä½œåŠ‡",
                "description": "ä½ è©¦åœ–æŠ“ä½ä»€éº¼æ±è¥¿ï¼Œä½†åªèƒ½åœ¨ç©ºä¸­é£„æµ®ã€‚å¥³å·«åœ¨ä¸‹é¢ç¬‘è‘—ï¼šã€Œé€™å°±æ˜¯ç„¡ç¦®çš„ä»£åƒ¹ï¼ã€\n\nçªç„¶ï¼Œä½ æ’åˆ°äº†ä¸€å€‹åŠç‡ˆï¼Œç‡ˆæ³¡çˆ†è£‚ï¼Œç«èŠ±å››æ¿ºã€‚å¥³å·«é©šå«ï¼šã€Œæˆ‘çš„å¤©ï¼å¿«ä¸‹ä¾†ï¼ã€å¥¹æ®å‹•é­”æ–ï¼Œä½ å®‰å…¨åœ°é™è½åˆ°åœ°é¢ã€‚",
                "is_ending": true,
                "outcome": "ğŸ’¥ æç¬‘çµå±€ï¼ä½ å› ç‚ºç„¡ç¦®è€Œæ¼‚æµ®ï¼Œæœ€å¾Œæ’å£äº†åŠç‡ˆï¼\n\né›–ç„¶çµå±€æœ‰é»å°·å°¬ï¼Œä½†è‡³å°‘ä½ å­¸æœƒäº†å°å¥³å·«è¦æœ‰ç¦®è²Œã€‚",
                "score": 30
            },
            "haunted_house": {
                "title": "é¬¼å±‹å…§éƒ¨",
                "description": "ä½ èµ°é€²é¬¼å±‹ï¼Œè£¡é¢ç‡ˆå…‰æ˜æš—ï¼Œç‰†ä¸Šæ›è‘—å¤è€çš„ç•«åƒã€‚çªç„¶ï¼Œä¸€å€‹åŠé€æ˜çš„é¬¼é­‚å¾ç‰†å£ä¸­é£„å‡ºä¾†ï¼\n\nã€Œæ­¡è¿ä¾†åˆ°æˆ‘çš„å®¶ï¼Œã€é¬¼é­‚èªªï¼Œã€Œæˆ‘æ˜¯é€™è£¡çš„ä¸»äººï¼Œå·²ç¶“æ­»äº† 200 å¹´äº†ã€‚ä½†æˆ‘é‚„æ˜¯å¾ˆ... æ´»èºã€‚ã€ä»–å°ä½ çœ¨äº†çœ¨çœ¼ã€‚",
                "choices": [
                    {"option": "A: èªªã€Œä½ çœ‹èµ·ä¾†å¾ˆå¯‚å¯ã€", "next_scene": "ghost_romance"},
                    {"option": "B: å•ã€Œä½ èƒ½è§¸æ‘¸å¯¦é«”å—ï¼Ÿã€", "next_scene": "ghost_touch"},
                    {"option": "C: è©¦åœ–é€ƒè·‘", "next_scene": "ghost_chase"}
                ]
            },
            "ghost_romance": {
                "title": "é¬¼é­‚çš„æµªæ¼«",
                "description": "é¬¼é­‚å˜†äº†å£æ°£ï¼šã€Œæ˜¯çš„ï¼Œæˆ‘ç¢ºå¯¦å¾ˆå¯‚å¯ã€‚200 å¹´ä¾†ï¼Œæ²’æœ‰äººé¡˜æ„å’Œæˆ‘... ä½ çŸ¥é“çš„ã€‚ã€ä»–çš„è²éŸ³å¸¶è‘—æ¸´æœ›ã€‚\n\nã€Œä½†æ˜¯ï¼Œã€ä»–çªç„¶èˆˆå¥®åœ°èªªï¼Œã€Œå¦‚æœä½ é¡˜æ„ï¼Œæˆ‘å¯ä»¥æ•™ä½ ä¸€äº›é¬¼é­‚çš„... ç‰¹æ®ŠæŠ€å·§ã€‚ã€",
                "choices": [
                    {"option": "A: èªªã€Œæˆ‘å¾ˆæ„Ÿèˆˆè¶£ã€", "next_scene": "ghost_lessons"},
                    {"option": "B: å•ã€Œæœƒä¸æœƒå¾ˆå†·ï¼Ÿã€", "next_scene": "cold_encounter"}
                ]
            },
            "cold_encounter": {
                "title": "å†°å†·çš„ç›¸é‡",
                "description": "é¬¼é­‚ç¬‘è‘—èªªï¼šã€Œä¸€é–‹å§‹æœƒæœ‰é»å†·ï¼Œä½†å¾ˆå¿«å°±æœƒè®Šæš–çš„ã€‚è®“æˆ‘ç¤ºç¯„çµ¦ä½ çœ‹...ã€\n\nä»–è¼•è¼•è§¸æ‘¸ä½ çš„æ‰‹ï¼Œä½ æ„Ÿè¦ºåˆ°ä¸€é™£æ¶¼æ„ï¼Œä½†åŒæ™‚åˆæœ‰ä¸€ç¨®å¥‡ç•°çš„æº«æš–ã€‚ä»–çš„è§¸æ‘¸è®“ä½ æ„Ÿåˆ°æ—¢åˆºæ¿€åˆèˆ’é©ã€‚",
                "is_ending": true,
                "outcome": "â„ï¸ å†°å†·çµå±€ï¼ä½ å’Œé¬¼é­‚åº¦éäº†å¥‡ç•°çš„å¤œæ™šï¼\n\né›–ç„¶æœ‰é»å†·ï¼Œä½†ä½ é«”é©—åˆ°äº†å‰æ‰€æœªæœ‰çš„æ„Ÿè¦ºã€‚",
                "score": 70
            },
            "pumpkin_patch": {
                "title": "å—ç“œç”°çš„èª˜æƒ‘",
                "description": "ä½ ä¾†åˆ°å—ç“œç”°ï¼Œæœˆå…‰ä¸‹çš„å¤§å—ç“œçœ‹èµ·ä¾†æ ¼å¤–èª˜äººã€‚çªç„¶ï¼Œä¸€å€‹ç©¿è‘—è¾²å¤«è£çš„æ€§æ„Ÿå¥³éƒå¾å—ç“œå¾Œé¢èµ°å‡ºä¾†ã€‚\n\nã€Œæ­¡è¿ä¾†åˆ°æˆ‘çš„å—ç“œç”°ï¼Œã€å¥¹èªªï¼Œã€Œæˆ‘æ˜¯é€™è£¡çš„å®ˆè­·è€…ã€‚é€™äº›å—ç“œéƒ½å¾ˆç‰¹åˆ¥... å®ƒå€‘æœƒå›æ‡‰ä½ çš„æ…¾æœ›ã€‚ã€",
                "choices": [
                    {"option": "A: å•ã€Œå—ç“œæœƒå›æ‡‰ä»€éº¼æ…¾æœ›ï¼Ÿã€", "next_scene": "pumpkin_magic"},
                    {"option": "B: èªªã€Œæˆ‘æ›´æƒ³äº†è§£ä½ ã€", "next_scene": "farmer_romance"}
                ]
            },
            "farmer_romance": {
                "title": "è¾²å¤«çš„æµªæ¼«",
                "description": "è¾²å¤«å¥³éƒå°ä½ çš„ç›´æ¥æ„Ÿåˆ°é©šè¨ï¼Œç„¶å¾Œç¬‘äº†ã€‚ã€Œä½ å¾ˆæœ‰è¶£ï¼Œã€å¥¹èªªï¼Œã€Œæˆ‘å–œæ­¡ç›´æ¥çš„äººã€‚ã€\n\nå¥¹é è¿‘ä½ ï¼Œè¼•è²èªªï¼šã€Œé‚£éº¼ï¼Œä½ æƒ³è¦äº†è§£æˆ‘çš„å“ªå€‹æ–¹é¢å‘¢ï¼Ÿã€å¥¹çš„çœ¼ç›é–ƒçˆè‘—èª˜æƒ‘çš„å…‰èŠ’ã€‚",
                "choices": [
                    {"option": "A: èªªã€Œæˆ‘æƒ³äº†è§£ä½ çš„å¿ƒã€", "next_scene": "heart_to_heart"},
                    {"option": "B: èªªã€Œæˆ‘æƒ³äº†è§£ä½ çš„èº«é«”ã€", "next_scene": "physical_attraction"}
                ]
            },
            "heart_to_heart": {
                "title": "å¿ƒéˆäº¤æµ",
                "description": "è¾²å¤«å¥³éƒå°ä½ çš„å›ç­”æ„Ÿåˆ°æ„Ÿå‹•ã€‚ã€Œä½ æ˜¯ä¸€å€‹çœŸæ­£çš„äººï¼Œã€å¥¹èªªï¼Œã€Œæˆ‘é¡˜æ„å’Œä½ åˆ†äº«æˆ‘çš„å…§å¿ƒã€‚ã€\n\nä½ å€‘ååœ¨å—ç“œç”°é‚Šï¼Œåˆ†äº«è‘—å½¼æ­¤çš„æ•…äº‹å’Œå¤¢æƒ³ï¼Œåº¦éäº†æœ€ç¾å¥½çš„æ™‚å…‰ã€‚",
                "is_ending": true,
                "outcome": "ğŸ’• å¿ƒéˆçµå±€ï¼ä½ å’Œè¾²å¤«å¥³éƒå»ºç«‹äº†æ·±åšçš„æƒ…æ„Ÿé€£æ¥ï¼\n\nä½ ç²å¾—äº†ã€å¿ƒéˆä¼´ä¾¶ã€çš„ç¨±è™Ÿï¼Œä¸¦ä¸”æ°¸é è¨˜ä½äº†é€™å€‹ç¾å¥½çš„å¤œæ™šã€‚",
                "score": 85
            },
            "physical_attraction": {
                "title": "èº«é«”å¸å¼•",
                "description": "è¾²å¤«å¥³éƒå°ä½ çš„ç›´æ¥æ„Ÿåˆ°èˆˆå¥®ã€‚ã€Œå¾ˆå¥½ï¼Œã€å¥¹èªªï¼Œã€Œæˆ‘å–œæ­¡èª å¯¦çš„äººã€‚ã€\n\nå¥¹æ‹‰è‘—ä½ çš„æ‰‹ï¼Œå¸¶ä½ åˆ°å—ç“œç”°çš„æ·±è™•ã€‚ã€Œè®“æˆ‘å€‘åšä¸€äº›çœŸæ­£æœ‰è¶£çš„äº‹æƒ…ï¼Œã€å¥¹è¼•è²èªªã€‚",
                "is_ending": true,
                "outcome": "ğŸ”¥ æ¿€æƒ…çµå±€ï¼ä½ å’Œè¾²å¤«å¥³éƒåº¦éäº†ç«ç†±çš„å¤œæ™šï¼\n\nä½ ç²å¾—äº†ã€æ¿€æƒ…æˆ€äººã€çš„ç¨±è™Ÿï¼Œä¸¦ä¸”æ°¸é è¨˜ä½äº†é€™å€‹å……æ»¿æ¿€æƒ…çš„å¤œæ™šã€‚",
                "score": 90
            },
            "cat_encounter": {
                "title": "ç¥ç§˜è²“å’ª",
                "description": "å¥³å·«ç¥ç§˜åœ°ç¬‘äº†ï¼šã€Œå’ªå’ªï¼Ÿå¥¹å¾ˆç‰¹åˆ¥ï¼Œä¸æ˜¯æ™®é€šçš„è²“ã€‚ã€çªç„¶ï¼Œä¸€éš»å„ªé›…çš„é»‘è²“å¾é™°å½±ä¸­èµ°å‡ºï¼Œç‰ çš„çœ¼ç›åœ¨æœˆå…‰ä¸‹é–ƒé–ƒç™¼å…‰ã€‚\n\nè²“å’ªè®Šèº«æˆä¸€å€‹è²“å¥³ï¼Œæœ‰è‘—æ€§æ„Ÿçš„è€³æœµå’Œå°¾å·´ã€‚ã€Œæˆ‘æ˜¯è‰è‰ï¼Œã€å¥¹ç”¨èª˜äººçš„è²éŸ³èªªï¼Œã€Œæƒ³å’Œæˆ‘ç©å—ï¼Ÿã€",
                "choices": [
                    {"option": "A: èªªã€Œæˆ‘å¾ˆæƒ³å’Œä½ ç©ã€", "next_scene": "cat_lady_romance"},
                    {"option": "B: å•ã€Œä½ èƒ½è®Šå›è²“å’ªå—ï¼Ÿã€", "next_scene": "cat_adventure"},
                    {"option": "C: é‚€è«‹å¥³å·«ä¸€èµ·åŠ å…¥", "next_scene": "witch_cat_threesome"}
                ]
            },
            "cat_lady_romance": {
                "title": "è²“å¥³çš„èª˜æƒ‘",
                "description": "è‰è‰å„ªé›…åœ°é è¿‘ä½ ï¼Œå¥¹çš„å°¾å·´è¼•æ’«è‘—ä½ çš„è‡‰é °ã€‚ã€Œæˆ‘å–œæ­¡ä½ çš„å‹‡æ°£ï¼Œã€å¥¹è¼•è²èªªï¼Œçœ¼ä¸­é–ƒçˆè‘—é‡æ€§çš„å…‰èŠ’ã€‚\n\nå¥¹å¸¶ä½ åˆ°ä¸€å€‹èˆ’é©çš„è§’è½ï¼Œæœˆå…‰é€éçª—æˆ¶ç‘åœ¨ä½ å€‘èº«ä¸Šã€‚ã€Œè®“æˆ‘æ•™ä½ è²“å’ªçš„... ç‰¹æ®ŠæŠ€å·§ã€‚ã€",
                "is_ending": true,
                "outcome": "ğŸ±â€ğŸ‘¤ è²“å¥³çµå±€ï¼ä½ èˆ‡è²“å¥³è‰è‰åº¦éäº†å……æ»¿é‡æ€§é­…åŠ›çš„å¤œæ™šï¼\n\nä½ ç²å¾—äº†ã€è²“å¥³æˆ€äººã€çš„ç¨±è™Ÿï¼Œå­¸æœƒäº†è²“å’ªèˆ¬çš„å„ªé›…èˆ‡æ¿€æƒ…ã€‚",
                "score": 80
            },
            "cat_adventure": {
                "title": "è²“å’ªå†’éšª",
                "description": "è‰è‰ç¬‘è‘—è®Šå›äº†å¯æ„›çš„é»‘è²“å’ªå’ªã€‚å¥¹è·³åˆ°ä½ çš„è‚©è†€ä¸Šï¼Œç”¨é ­è¹­è¹­ä½ çš„è‡‰é °ã€‚\n\nã€Œå’ªå’ªå¾ˆå–œæ­¡ä½ ï¼Œã€å¥³å·«èªªï¼Œã€Œå¥¹æƒ³å¸¶ä½ å»æ¢ç´¢é€™å€‹ç¥å¥‡çš„åœ°æ–¹ã€‚ã€å’ªå’ªé–‹å§‹å¼•å°ä½ èµ°å‘ä¸€å€‹éš±ç§˜çš„èŠ±åœ’ã€‚",
                "is_ending": true,
                "outcome": "ğŸ± è²“å’ªçµå±€ï¼ä½ å’Œé»‘è²“å’ªå’ªå»ºç«‹äº†ç´”æ½”çš„å‹èª¼ï¼\n\nä½ ç²å¾—äº†ã€è²“å’ªä¹‹å‹ã€çš„ç¨±è™Ÿï¼Œä¸¦ä¸”ç²å¾—äº†è²“å’ªçš„ä¿¡ä»»èˆ‡å‹èª¼ã€‚",
                "score": 60
            },
            "witch_cat_threesome": {
                "title": "é­”æ³•ä¸‰é‡å¥",
                "description": "å¥³å·«å’Œè‰è‰å°è¦–ä¸€çœ¼ï¼Œéƒ½ç¬‘äº†ã€‚ã€Œæœ‰è¶£çš„æè­°ï¼Œã€å¥³å·«èªªï¼Œã€Œä¸æ˜¯æ¯å€‹äººéƒ½èƒ½åŒæ™‚æ‰¿å—æˆ‘å€‘å…©å€‹çš„é­”åŠ›ã€‚ã€\n\nè‰è‰è®Šå›è²“å¥³å½¢æ…‹ï¼Œä¸‰äººåœ¨æœˆå…‰ä¸‹é–‹å§‹äº†ä¸€å ´å¥‡ç•°çš„é­”æ³•å„€å¼ï¼Œå……æ»¿äº†ç¥ç§˜èˆ‡æ¿€æƒ…ã€‚",
                "is_ending": true,
                "outcome": "ğŸ”® é­”æ³•ä¸‰é‡çµå±€ï¼ä½ èˆ‡å¥³å·«å’Œè²“å¥³è‰è‰ä¸€èµ·åº¦éäº†çµ‚ç”Ÿé›£å¿˜çš„é­”æ³•å¤œæ™šï¼\n\nä½ ç²å¾—äº†ã€é­”æ³•å¤§å¸«ã€çš„ç¨±è™Ÿï¼ŒæŒæ¡äº†æœ€é«˜ç´šçš„æ„›æƒ…é­”æ³•ã€‚",
                "score": 120
            },
            "apology_accepted": {
                "title": "çœŸèª çš„é“æ­‰",
                "description": "ä½ åœ¨ç©ºä¸­èª æ‡‡åœ°é“æ­‰ï¼šã€Œå°ä¸èµ·ï¼Œæˆ‘ä¸æ‡‰è©²é‚£éº¼ç„¡ç¦®ã€‚è«‹åŸè«’æˆ‘çš„å†’æ˜§ã€‚ã€\n\nå¥³å·«çœ‹åˆ°ä½ çœŸèª çš„æ‚”æ„ï¼Œè‡‰è‰²è»ŸåŒ–äº†ã€‚ã€Œå¥½å§ï¼Œè‡³å°‘ä½ çŸ¥é“éŒ¯äº†ã€‚ã€å¥¹è¼•æ®é­”æ–ï¼Œè®“ä½ ç·©ç·©é™è½ã€‚ã€Œç¾åœ¨ï¼Œè®“æˆ‘æ•™ä½ å¦‚ä½•æ­£ç¢ºåœ°èˆ‡å¥³å·«äº¤æµã€‚ã€",
                "choices": [
                    {"option": "A: è¬™éœåœ°å­¸ç¿’ç¦®å„€", "next_scene": "witch_lessons"},
                    {"option": "B: è«‹æ±‚ç¬¬äºŒæ¬¡æ©Ÿæœƒ", "next_scene": "second_chance_romance"}
                ]
            },
            "witch_lessons": {
                "title": "å¥³å·«çš„æ•™å°",
                "description": "å¥³å·«è€å¿ƒåœ°æ•™ä½ é­”æ³•ä¸–ç•Œçš„ç¦®å„€å’Œè¦çŸ©ã€‚ã€Œå°Šé‡æ˜¯ä¸€åˆ‡é—œä¿‚çš„åŸºç¤ï¼Œã€å¥¹èªªï¼Œã€Œç„¡è«–æ˜¯æ„›æƒ…é‚„æ˜¯å‹æƒ…ã€‚ã€\n\nåœ¨å¥¹çš„æŒ‡å°ä¸‹ï¼Œä½ å­¸æœƒäº†å¦‚ä½•èˆ‡é­”æ³•ç”Ÿç‰©ç›¸è™•ï¼Œé€™å°‡æ˜¯ä½ çè²´çš„äººç”Ÿç¶“é©—ã€‚",
                "is_ending": true,
                "outcome": "ğŸ“š å­¸ç¿’çµå±€ï¼ä½ å¾å¥³å·«é‚£è£¡å­¸æœƒäº†å¯¶è²´çš„äººç”Ÿèª²ç¨‹ï¼\n\nä½ ç²å¾—äº†ã€é­”æ³•å­¸å¾’ã€çš„ç¨±è™Ÿï¼ŒæŒæ¡äº†åŸºæœ¬çš„é­”æ³•ç¦®å„€ã€‚",
                "score": 65
            },
            "second_chance_romance": {
                "title": "ç¬¬äºŒæ¬¡æ©Ÿæœƒ",
                "description": "å¥³å·«è€ƒæ…®äº†ä¸€æœƒå…’ï¼šã€Œæ¯å€‹äººéƒ½å€¼å¾—ç¬¬äºŒæ¬¡æ©Ÿæœƒï¼Œã€å¥¹æº«å’Œåœ°èªªï¼Œã€Œä½†é€™æ¬¡ä½ å¿…é ˆè­‰æ˜ä½ çš„çœŸå¿ƒã€‚ã€\n\nå¥¹çµ¦äº†ä½ ä¸€æœµé­”æ³•ç«ç‘°ï¼šã€Œå¦‚æœä½ èƒ½è®“é€™æœµèŠ±åœ¨åˆå¤œå‰ç¶»æ”¾ï¼Œæˆ‘å°±ç›¸ä¿¡ä½ çš„èª æ„ã€‚ã€",
                "choices": [
                    {"option": "A: ç”¨çœŸå¿ƒæ¾†çŒç«ç‘°", "next_scene": "rose_blooms"},
                    {"option": "B: è©¢å•æ¾†çŒçš„æ–¹æ³•", "next_scene": "magic_guidance"}
                ]
            },
            "rose_blooms": {
                "title": "ç«ç‘°ç¶»æ”¾",
                "description": "ä½ å°‡æ‰€æœ‰çš„çœŸèª å’Œæ„›æ„æ³¨å…¥ç«ç‘°ä¸­ã€‚å¥‡è¹Ÿç™¼ç”Ÿäº†ï¼ç«ç‘°åœ¨ä½ æ‰‹ä¸­æ…¢æ…¢ç¶»æ”¾ï¼Œæ•£ç™¼å‡ºè¿·äººçš„é­”æ³•å…‰èŠ’ã€‚\n\nå¥³å·«é©šè¨åœ°çœ‹è‘—é€™ä¸€åˆ‡ï¼šã€Œæˆ‘å¾æœªè¦‹éå¦‚æ­¤ç´”æ½”çš„å¿ƒéˆèƒ½é‡ã€‚ä½ çœŸçš„è®“æˆ‘åˆ®ç›®ç›¸çœ‹ã€‚ã€",
                "is_ending": true,
                "outcome": "ğŸŒ¹ çœŸå¿ƒçµå±€ï¼ä½ ç”¨ç´”æ½”çš„å¿ƒæ„è´å¾—äº†å¥³å·«çš„å°Šé‡èˆ‡æ„›æƒ…ï¼\n\nä½ ç²å¾—äº†ã€ç´”å¿ƒé¨å£«ã€çš„ç¨±è™Ÿï¼Œè­‰æ˜äº†çœŸæ„›çš„åŠ›é‡ã€‚",
                "score": 95
            },
            "magic_guidance": {
                "title": "é­”æ³•æŒ‡å°",
                "description": "å¥³å·«å¾®ç¬‘è‘—æŒ‡å°ä½ ï¼šã€Œé­”æ³•ç«ç‘°éœ€è¦çš„ä¸æ˜¯æ°´ï¼Œè€Œæ˜¯æƒ…æ„Ÿçš„å…±é³´ã€‚å°‡ä½ æœ€ç¾å¥½çš„å›æ†¶å’Œæ„Ÿæƒ…å‚³éçµ¦å®ƒã€‚ã€\n\nåœ¨å¥¹çš„å¹«åŠ©ä¸‹ï¼Œä½ æˆåŠŸè®“ç«ç‘°ç¶»æ”¾ï¼Œå…©äººåœ¨éç¨‹ä¸­å»ºç«‹äº†æ·±åšçš„æƒ…èª¼ã€‚",
                "is_ending": true,
                "outcome": "ğŸ­ å¸«ç”Ÿçµå±€ï¼åœ¨å¥³å·«çš„æŒ‡å°ä¸‹ï¼Œä½ å­¸æœƒäº†æ„›çš„çœŸè«¦ï¼\n\nä½ ç²å¾—äº†ã€é­”æ³•è¦‹ç¿’ç”Ÿã€çš„ç¨±è™Ÿï¼ŒæŒæ¡äº†æƒ…æ„Ÿé­”æ³•çš„åŸºç¤ã€‚",
                "score": 75
            },
            "ghost_touch": {
                "title": "é¬¼é­‚çš„è§¸æ‘¸",
                "description": "é¬¼é­‚å±•ç¤ºä»–åŠé€æ˜çš„æ‰‹ï¼šã€Œæˆ‘å¯ä»¥è§¸æ‘¸å¯¦é«”ï¼Œä½†æ„Ÿè¦ºæœƒå¾ˆ... ç‰¹åˆ¥ã€‚ã€ä»–è¼•æ’«ä½ çš„è‡‰é °ï¼Œä½ æ„Ÿåˆ°ä¸€é™£å¥‡ç•°çš„æ¶¼æ„ä¼´éš¨è‘—é›»æµèˆ¬çš„åˆºæ¿€ã€‚\n\nã€Œ200å¹´çš„å­¤ç¨è®“æˆ‘å°è§¸æ‘¸æ ¼å¤–æ¸´æœ›ï¼Œã€ä»–è¼•è²èªªï¼Œã€Œä½ é¡˜æ„é«”é©—é€™ç¨®è¶…è¶Šç”Ÿæ­»çš„è¦ªå¯†æ¥è§¸å—ï¼Ÿã€",
                "choices": [
                    {"option": "A: èªªã€Œæˆ‘é¡˜æ„é«”é©—ã€", "next_scene": "ghost_intimacy"},
                    {"option": "B: å•ã€Œæœƒæœ‰ä»€éº¼å¾Œæœå—ï¼Ÿã€", "next_scene": "ghost_consequences"},
                    {"option": "C: æè­°æ…¢æ…¢ä¾†", "next_scene": "gentle_approach"}
                ]
            },
            "ghost_intimacy": {
                "title": "è¶…è¶Šç”Ÿæ­»çš„è¦ªå¯†",
                "description": "ä½ å‹‡æ•¢åœ°æ¥å—äº†é¬¼é­‚çš„è§¸æ‘¸ã€‚é‚£ç¨®æ„Ÿè¦ºé›£ä»¥å½¢å®¹ - æ—¢å†°å†·åˆæº«æš–ï¼Œæ—¢è™›å¹»åˆçœŸå¯¦ã€‚ä½ å€‘åœ¨é€™ç¨®å¥‡ç•°çš„æ¥è§¸ä¸­æ‰¾åˆ°äº†å½¼æ­¤ã€‚\n\né¬¼é­‚æ„Ÿå‹•åœ°èªªï¼šã€Œ200å¹´ä¾†ï¼Œä½ æ˜¯ç¬¬ä¸€å€‹çœŸæ­£æ¥å—æˆ‘çš„äººã€‚é€™æ¯”ä»»ä½•é­”æ³•éƒ½è¦çè²´ã€‚ã€",
                "is_ending": true,
                "outcome": "ğŸ‘» éˆé­‚çµå±€ï¼ä½ èˆ‡é¬¼é­‚é«”é©—äº†è¶…è¶Šç”Ÿæ­»çš„çœŸæ„›ï¼\n\nä½ ç²å¾—äº†ã€éˆé­‚æˆ€äººã€çš„ç¨±è™Ÿï¼Œè­‰æ˜äº†æ„›æƒ…èƒ½å¤ è·¨è¶Šç”Ÿæ­»ç•Œé™ã€‚",
                "score": 88
            },
            "ghost_consequences": {
                "title": "é¬¼é­‚çš„è­¦å‘Š",
                "description": "é¬¼é­‚èª å¯¦åœ°å‘Šè¨´ä½ ï¼šã€Œèˆ‡é¬¼é­‚è¦ªå¯†æ¥è§¸å¯èƒ½æœƒè®“ä½ å°éˆç•Œæ›´æ•æ„Ÿï¼Œä½†ä¹Ÿæœƒè®“ä½ æ›´ç†è§£ç”Ÿå‘½çš„çè²´ã€‚ã€\n\nä»–çµ¦ä½ é¸æ“‡çš„æ¬Šåˆ©ï¼šã€Œæ±ºå®šæ¬Šåœ¨ä½ ï¼Œæˆ‘ä¸æœƒå¼·è¿«ä»»ä½•äººã€‚ä½†å¦‚æœä½ é¡˜æ„ï¼Œæˆ‘ä¿è­‰é€™æœƒæ˜¯ä½ æœ€é›£å¿˜çš„ç¶“æ­·ã€‚ã€",
                "choices": [
                    {"option": "A: æ±ºå®šå†’éšªä¸€è©¦", "next_scene": "ghost_intimacy"},
                    {"option": "B: é¸æ“‡åªåšæœ‹å‹", "next_scene": "ghost_friendship"}
                ]
            },
            "gentle_approach": {
                "title": "æº«æŸ”çš„é–‹å§‹",
                "description": "é¬¼é­‚æ¬£è³ä½ çš„è¬¹æ…ï¼šã€Œä½ å¾ˆè°æ˜ï¼Œæ€¥èºå¾ä¾†ä¸æ˜¯å¥½äº‹ã€‚ã€ä»–æº«æŸ”åœ°æ¡ä½ä½ çš„æ‰‹ï¼Œè®“ä½ æ…¢æ…¢é©æ‡‰é€™ç¨®å¥‡ç‰¹çš„æ„Ÿè¦ºã€‚\n\nã€Œæˆ‘å€‘æœ‰æ•´å¤œçš„æ™‚é–“ï¼Œã€ä»–æº«æŸ”åœ°èªªï¼Œã€Œè®“æˆ‘å€‘æ…¢æ…¢æ¢ç´¢å½¼æ­¤çš„ä¸–ç•Œã€‚ã€",
                "is_ending": true,
                "outcome": "ğŸ’« æº«æŸ”çµå±€ï¼ä½ èˆ‡é¬¼é­‚å»ºç«‹äº†æº«æŸ”è€Œæ·±åˆ»çš„è¯ç¹«ï¼\n\nä½ ç²å¾—äº†ã€æº«æŸ”éˆé­‚ã€çš„ç¨±è™Ÿï¼Œå­¸æœƒäº†è€å¿ƒèˆ‡ç†è§£çš„é‡è¦ã€‚",
                "score": 82
            },
            "ghost_friendship": {
                "title": "è·¨ç•Œå‹èª¼",
                "description": "é¬¼é­‚å°ä½ çš„æ±ºå®šè¡¨ç¤ºç†è§£ï¼šã€Œå‹èª¼ä¹Ÿæ˜¯ä¸€ç¨®çè²´çš„é—œä¿‚ï¼Œã€ä»–èªªï¼Œã€Œæˆ‘å¾ˆé«˜èˆˆèƒ½æœ‰ä¸€å€‹æ´»äººæœ‹å‹ã€‚ã€\n\nä½ å€‘åº¦éäº†ä¸€å€‹å……æ»¿è¶£å‘³å°è©±çš„å¤œæ™šï¼Œåˆ†äº«è‘—ç”Ÿèˆ‡æ­»çš„ä¸åŒé«”é©—ï¼Œå»ºç«‹äº†è·¨è¶Šç•Œé™çš„å‹èª¼ã€‚",
                "is_ending": true,
                "outcome": "ğŸ¤ å‹èª¼çµå±€ï¼ä½ èˆ‡é¬¼é­‚å»ºç«‹äº†çè²´çš„è·¨ç•Œå‹èª¼ï¼\n\nä½ ç²å¾—äº†ã€éˆç•Œä¹‹å‹ã€çš„ç¨±è™Ÿï¼Œè­‰æ˜äº†å‹èª¼ç„¡ç•Œé™ã€‚",
                "score": 70
            },
            "ghost_chase": {
                "title": "é¬¼é­‚è¿½é€",
                "description": "ä½ è½‰èº«å°±è·‘ï¼ä½†é¬¼é­‚çš„é€Ÿåº¦æ¯”ä½ æƒ³åƒçš„è¦å¿«ã€‚ã€Œåˆ¥è·‘å•Šï¼æˆ‘åªæ˜¯æƒ³èŠèŠå¤©ï¼ã€ä»–åœ¨å¾Œé¢å¤§å–Šã€‚\n\nä½ è·‘å¾—å¤ªæ€¥ï¼Œè¢«åœ°æ¯¯çµ†å€’äº†ã€‚é¬¼é­‚è¿½ä¸Šä¾†ï¼Œæ“”å¿ƒåœ°å•ï¼šã€Œä½ æ²’äº‹å§ï¼Ÿæˆ‘çœŸçš„æ²’æœ‰æƒ¡æ„ï¼Œåªæ˜¯å¤ªä¹…æ²’è¦‹åˆ°æ´»äººäº†...ã€",
                "choices": [
                    {"option": "A: é“æ­‰ä¸¦è§£é‡‹ä½ çš„ææ‡¼", "next_scene": "ghost_understanding"},
                    {"option": "B: ç¹¼çºŒè©¦åœ–é€ƒè·‘", "next_scene": "final_chase"},
                    {"option": "C: å•ä»–çœŸæ­£æƒ³è¦ä»€éº¼", "next_scene": "ghost_honesty"}
                ]
            },
            "ghost_understanding": {
                "title": "ç›¸äº’ç†è§£",
                "description": "ä½ å¦èª åœ°èªªå‡ºäº†ä½ çš„å®³æ€•ï¼Œé¬¼é­‚ç†è§£åœ°é»é ­ï¼šã€Œæˆ‘å¿˜äº†å°æ´»äººä¾†èªªï¼Œé¬¼é­‚ç¢ºå¯¦å¾ˆå¯æ€•ã€‚æˆ‘å¤ªå­¤ç¨äº†ï¼Œæœ‰é»å¤ªæ€¥åˆ‡äº†ã€‚ã€\n\nä»–çœŸèª åœ°é“æ­‰ï¼Œä½ å€‘é–‹å§‹äº†æ­£å¸¸çš„å°è©±ï¼Œé€æ¼¸å»ºç«‹èµ·ç†è§£èˆ‡ä¿¡ä»»ã€‚",
                "is_ending": true,
                "outcome": "ğŸ¤— ç†è§£çµå±€ï¼é€éå¦èª æºé€šï¼Œä½ èˆ‡é¬¼é­‚é”æˆäº†ç›¸äº’ç†è§£ï¼\n\nä½ ç²å¾—äº†ã€æºé€šå¤§å¸«ã€çš„ç¨±è™Ÿï¼Œå­¸æœƒäº†åŒ–è§£èª¤æœƒçš„æŠ€å·§ã€‚",
                "score": 78
            },
            "final_chase": {
                "title": "æœ€çµ‚è¿½é€",
                "description": "ä½ ç¹¼çºŒé€ƒè·‘ï¼Œä½†åœ¨ä¸€å€‹è½‰è§’è™•æ‘”äº†ä¸€è·¤ã€‚é¬¼é­‚çµ‚æ–¼è¿½ä¸Šäº†ä½ ï¼Œä½†ä»–æ²’æœ‰å‚·å®³ä½ ï¼Œè€Œæ˜¯é—œå¿ƒåœ°æª¢æŸ¥ä½ çš„å‚·å‹¢ã€‚\n\nã€Œçœ‹ï¼Œæˆ‘çœŸçš„æ²’æœ‰æƒ¡æ„ï¼Œã€ä»–ç„¡å¥ˆåœ°èªªï¼Œã€Œå¦‚æœæˆ‘æƒ³å‚·å®³ä½ ï¼Œæ ¹æœ¬ä¸éœ€è¦è¿½é€ã€‚æˆ‘åªæ˜¯... å¤ªå¯‚å¯äº†ã€‚ã€",
                "is_ending": true,
                "outcome": "ğŸƒâ€â™‚ï¸ è¿½é€çµå±€ï¼é›–ç„¶ä¸€é™£é©šåš‡ï¼Œä½†ä½ æœ€çµ‚ç™¼ç¾é¬¼é­‚å…¶å¯¦å¾ˆå–„è‰¯ï¼\n\nä½ ç²å¾—äº†ã€å‹‡æ•¢é€ƒè·‘è€…ã€çš„ç¨±è™Ÿï¼Œé›–ç„¶éç¨‹æœ‰äº›ç‹¼ç‹½ã€‚",
                "score": 45
            },
            "ghost_honesty": {
                "title": "é¬¼é­‚çš„çœŸå¿ƒè©±",
                "description": "é¬¼é­‚å˜†äº†å£æ°£ï¼šã€Œæˆ‘åªæ˜¯æƒ³è¦æœ‰äººé™ªä¼´ã€‚200å¹´çš„å­¤ç¨å¤ªæ¼«é•·äº†ï¼Œæˆ‘å¹¾ä¹å¿˜è¨˜äº†èˆ‡äººäº¤æµçš„æ„Ÿè¦ºã€‚ã€\n\nä»–çš„èª å¯¦æ‰“å‹•äº†ä½ ï¼šã€Œæˆ‘ä¸æœƒå¼·è¿«ä½ åšä»»ä½•äº‹ï¼Œå¦‚æœä½ çœŸçš„å®³æ€•ï¼Œä½ å¯ä»¥é›¢é–‹ã€‚ä½†å¦‚æœä½ é¡˜æ„èŠèŠå¤©... é‚£å°‡æ˜¯æˆ‘é€™å€‹ä¸–ç´€æœ€å¤§çš„å¿«æ¨‚ã€‚ã€",
                "choices": [
                    {"option": "A: åŒæ„é™ªä»–èŠå¤©", "next_scene": "ghost_conversation"},
                    {"option": "B: æè­°æˆç‚ºæœ‹å‹", "next_scene": "ghost_friendship"}
                ]
            },
            "ghost_conversation": {
                "title": "æ·±å¤œè«‡å¿ƒ",
                "description": "ä½ æ±ºå®šé™ªé¬¼é­‚èŠå¤©ã€‚ä»–åˆ†äº«äº†200å¹´ä¾†çš„å­¤ç¨æ­²æœˆï¼Œä½ å‰‡è¬›è¿°äº†ç¾ä»£ä¸–ç•Œçš„è®ŠåŒ–ã€‚\n\næ™‚é–“åœ¨å°è©±ä¸­é£›å¿«æµé€ï¼Œä½ å€‘å¾é™Œç”Ÿåˆ°ç†Ÿæ‚‰ï¼Œå»ºç«‹äº†ä¸€ç¨®ç‰¹æ®Šçš„è¯ç¹«ã€‚é»æ˜æ™‚åˆ†ï¼Œä½ å€‘å·²ç¶“åƒè€æœ‹å‹ä¸€æ¨£äº†ã€‚",
                "is_ending": true,
                "outcome": "ğŸ’¬ è«‡è©±çµå±€ï¼é€šéæ·±å¤œçš„è«‡å¿ƒï¼Œä½ ç‚ºé¬¼é­‚å¸¶ä¾†äº†ä¹…é•çš„æº«æš–ï¼\n\nä½ ç²å¾—äº†ã€å¿ƒéˆå°å¸«ã€çš„ç¨±è™Ÿï¼Œç”¨é™ªä¼´æ²»ç™’äº†ä¸€é¡†å­¤ç¨çš„å¿ƒã€‚",
                "score": 73
            },
            "ghost_lessons": {
                "title": "é¬¼é­‚çš„ç‰¹æ®ŠæŠ€å·§",
                "description": "é¬¼é­‚èˆˆå¥®åœ°é–‹å§‹æ•™ä½ ï¼šã€Œä½œç‚ºé¬¼é­‚ï¼Œæˆ‘æŒæ¡äº†ä¸€äº›... ç‰¹åˆ¥çš„æŠ€èƒ½ã€‚æ¯”å¦‚ç©¿ç‰†è¡“ã€é£„æµ®è¡“ï¼Œé‚„æœ‰æœ€é‡è¦çš„ - éˆé­‚å…±é³´è¡“ã€‚ã€\n\nä»–æ•™ä½ å¦‚ä½•æ„Ÿå—éˆé­‚çš„æŒ¯å‹•ï¼Œå¦‚ä½•åœ¨ç²¾ç¥å±¤é¢å»ºç«‹æ·±åº¦é€£æ¥ã€‚é€™ç¨®é«”é©—è¶…è¶Šäº†è‚‰é«”çš„é™åˆ¶ã€‚",
                "choices": [
                    {"option": "A: å°ˆæ³¨å­¸ç¿’éˆé­‚å…±é³´", "next_scene": "soul_resonance"},
                    {"option": "B: è¦æ±‚å­¸ç¿’é£„æµ®è¡“", "next_scene": "floating_lessons"},
                    {"option": "C: è©¢å•ç©¿ç‰†è¡“çš„ç§˜å¯†", "next_scene": "wall_phasing"}
                ]
            },
            "soul_resonance": {
                "title": "éˆé­‚å…±é³´",
                "description": "åœ¨é¬¼é­‚çš„æŒ‡å°ä¸‹ï¼Œä½ å­¸æœƒäº†éˆé­‚å…±é³´ã€‚å…©å€‹éˆé­‚åœ¨ç²¾ç¥å±¤é¢å®Œç¾èåˆï¼Œç”¢ç”Ÿäº†å‰æ‰€æœªæœ‰çš„è¦ªå¯†æ„Ÿã€‚\n\né€™ç¨®é«”é©—è¶…è¶Šäº†è‚‰é«”çš„æ„›æƒ…ï¼Œç›´é”éˆé­‚æ·±è™•ã€‚ä½ å€‘åœ¨é€™ç¨®ç¥è–çš„é€£çµä¸­æ‰¾åˆ°äº†æ°¸æ†çš„æ„›ã€‚",
                "is_ending": true,
                "outcome": "âœ¨ éˆé­‚å…±é³´çµå±€ï¼ä½ èˆ‡é¬¼é­‚é”æˆäº†æœ€é«˜ç´šçš„éˆé­‚èåˆï¼\n\nä½ ç²å¾—äº†ã€éˆé­‚å¤§å¸«ã€çš„ç¨±è™Ÿï¼ŒæŒæ¡äº†éˆé­‚å…±é³´çš„çµ‚æ¥µå¥§ç¾©ã€‚",
                "score": 110
            },
            "floating_lessons": {
                "title": "é£„æµ®è¡“æ•™å­¸",
                "description": "é¬¼é­‚æ•™ä½ å¦‚ä½•è®“éˆé­‚è„«é›¢è‚‰é«”çš„æŸç¸›ï¼šã€Œé‡é»æ˜¯æ”¾ç©ºå¿ƒéˆï¼Œè®“æ„è­˜èˆ‡é‡åŠ›åˆ†é›¢ã€‚ã€\n\nåœ¨ä»–çš„æŒ‡å°ä¸‹ï¼Œä½ å±…ç„¶çœŸçš„é£„æµ®äº†èµ·ä¾†ï¼å…©äººåœ¨ç©ºä¸­æ“æŠ±ï¼Œé«”é©—è‘—è¶…è¶Šé‡åŠ›çš„è‡ªç”±èˆ‡æ„›æƒ…ã€‚",
                "is_ending": true,
                "outcome": "ğŸŒŸ é£„æµ®çµå±€ï¼ä½ å­¸æœƒäº†é£„æµ®è¡“ï¼Œèˆ‡é¬¼é­‚åœ¨ç©ºä¸­åº¦éäº†æµªæ¼«æ™‚å…‰ï¼\n\nä½ ç²å¾—äº†ã€é£„æµ®å¤§å¸«ã€çš„ç¨±è™Ÿï¼ŒæŒæ¡äº†è¶…è¶Šé‡åŠ›çš„èƒ½åŠ›ã€‚",
                "score": 92
            },
            "wall_phasing": {
                "title": "ç©¿ç‰†è¡“å¥§ç§˜",
                "description": "é¬¼é­‚æ­ç¤ºäº†ç©¿ç‰†è¡“çš„ç§˜å¯†ï¼šã€Œé—œéµæ˜¯ç†è§£ç‰©è³ªçš„æœ¬è³ªï¼Œè®“åˆ†å­é‡æ–°æ’åˆ—ã€‚ã€é›–ç„¶ä½ ç„¡æ³•å®Œå…¨å­¸æœƒï¼Œä½†ç†è§£äº†é€™å€‹åŸç†ã€‚\n\næ›´é‡è¦çš„æ˜¯ï¼Œé¬¼é­‚æ•™æœƒäº†ä½ å¦‚ä½•ã€Œç©¿é€ã€å¿ƒéˆçš„éšœç¤™ï¼Œå»ºç«‹æ›´æ·±å±¤çš„æƒ…æ„Ÿé€£æ¥ã€‚",
                "is_ending": true,
                "outcome": "ğŸšª ç©¿é€çµå±€ï¼é›–ç„¶ç„¡æ³•ç©¿ç‰†ï¼Œä½†ä½ å­¸æœƒäº†ç©¿é€å¿ƒéˆçš„éšœç¤™ï¼\n\nä½ ç²å¾—äº†ã€å¿ƒéˆç©¿é€å¸«ã€çš„ç¨±è™Ÿï¼ŒæŒæ¡äº†ç†è§£ä»–äººå…§å¿ƒçš„èƒ½åŠ›ã€‚",
                "score": 85
            },
            "pumpkin_magic": {
                "title": "å—ç“œçš„é­”æ³•",
                "description": "è¾²å¤«å¥³éƒç¥ç§˜åœ°ç¬‘è‘—ï¼šã€Œé€™äº›å—ç“œå¸æ”¶äº†æœˆå…‰ç²¾è¯ï¼Œèƒ½å¤ å¯¦ç¾äººå€‘æœ€æ·±å±¤çš„é¡˜æœ›ã€‚ä½†è¦å°å¿ƒï¼Œã€å¥¹è­¦å‘Šé“ï¼Œã€Œå®ƒå€‘æœƒè®“ä½ çš„æ…¾æœ›æˆçœŸï¼ŒåŒ…æ‹¬é‚£äº›ä½ ä¸æ•¢æ‰¿èªçš„ã€‚ã€\n\nå¥¹æŒ‡å‘å¹¾å€‹ç‰¹åˆ¥å¤§çš„å—ç“œï¼šã€Œé¸æ“‡ä¸€å€‹ï¼Œè®“å®ƒè®€å–ä½ çš„å¿ƒé¡˜å§ã€‚ã€",
                "choices": [
                    {"option": "A: é¸æ“‡æœ€å¤§çš„é‡‘è‰²å—ç“œ", "next_scene": "big_pumpkin_fun"},
                    {"option": "B: é¸æ“‡ç¥ç§˜çš„ç´«è‰²å—ç“œ", "next_scene": "purple_pumpkin_mystery"},
                    {"option": "C: é¸æ“‡å°å·§çš„éŠ€è‰²å—ç“œ", "next_scene": "silver_pumpkin_wish"}
                ]
            },
            "big_pumpkin_fun": {
                "title": "å·¨å¤§å—ç“œçš„é©šå–œ",
                "description": "ä½ è§¸æ‘¸å¤§å—ç“œçš„ç¬é–“ï¼Œå®ƒé–‹å§‹ç™¼å…‰ä¸¦ä¸”æ…¢æ…¢è®Šå½¢ã€‚æœ€çµ‚ï¼Œå—ç“œè®Šæˆäº†ä¸€å€‹è±ªè¯çš„æ„›æƒ…å·¢ç©´ï¼Œè£¡é¢é‹ªæ»¿äº†æŸ”è»Ÿçš„çµ²ç¶¢å’Œç«ç‘°èŠ±ç“£ã€‚\n\nè¾²å¤«å¥³éƒé©šè¨åœ°èªªï¼šã€Œå“‡ï¼å—ç“œå¾ˆå°‘è®Šæˆé€™éº¼... å¯¦ç”¨çš„æ±è¥¿ã€‚çœ‹ä¾†ä½ çš„é¡˜æœ›å¾ˆæ˜ç¢ºå‘¢ã€‚ã€",
                "is_ending": true,
                "outcome": "ğŸƒ å¤§å—ç“œçµå±€ï¼å·¨å¤§å—ç“œç‚ºä½ å‰µé€ äº†å®Œç¾çš„æµªæ¼«ç©ºé–“ï¼\n\nä½ ç²å¾—äº†ã€å—ç“œå¤§å¸«ã€çš„ç¨±è™Ÿï¼Œå­¸æœƒäº†å¦‚ä½•è®“é¡˜æœ›æˆçœŸã€‚",
                "score": 87
            },
            "purple_pumpkin_mystery": {
                "title": "ç´«è‰²å—ç“œçš„ç§˜å¯†",
                "description": "ç´«è‰²å—ç“œæ•£ç™¼å‡ºç¥ç§˜çš„è–°è¡£è‰é¦™å‘³ï¼Œç•¶ä½ è§¸æ‘¸å®ƒæ™‚ï¼Œçªç„¶çœ‹åˆ°äº†è¾²å¤«å¥³éƒçš„çœŸå¯¦èº«ä»½ - å¥¹æ˜¯å¤§åœ°å¥³ç¥çš„åŒ–èº«ï¼\n\nã€Œä½ ç™¼ç¾äº†æˆ‘çš„ç§˜å¯†ï¼Œã€å¥¹å¾®ç¬‘è‘—é¡¯ç¾å‡ºå¥³ç¥çš„å…‰è¼ï¼Œã€Œä½œç‚ºçè³ï¼Œæˆ‘å°‡è³œäºˆä½ å¤§åœ°çš„ç¥ç¦èˆ‡æ°¸æ†çš„è±æ”¶ã€‚ã€",
                "is_ending": true,
                "outcome": "ğŸŒ¸ å¥³ç¥çµå±€ï¼ä½ ç™¼ç¾äº†è¾²å¤«å¥³éƒçš„çœŸå¯¦èº«ä»½ï¼Œç²å¾—äº†å¥³ç¥çš„ç¥ç¦ï¼\n\nä½ ç²å¾—äº†ã€å¤§åœ°å¯µå…’ã€çš„ç¨±è™Ÿï¼Œå¾—åˆ°äº†å¥³ç¥æ°¸æ†çš„çœ·é¡§ã€‚",
                "score": 105
            },
            "silver_pumpkin_wish": {
                "title": "éŠ€è‰²å—ç“œçš„é¡˜æœ›",
                "description": "å°å·§çš„éŠ€è‰²å—ç“œåœ¨ä½ æ‰‹ä¸­æº«æš–åœ°è·³å‹•ï¼Œå°±åƒä¸€é¡†å¿ƒè‡Ÿã€‚çªç„¶ï¼Œä½ æ„Ÿå—åˆ°äº†è¾²å¤«å¥³éƒå…§å¿ƒçœŸæ­£çš„é¡˜æœ› - å¥¹å¸Œæœ›æœ‰äººèƒ½çœŸæ­£ç†è§£å¥¹å°åœŸåœ°çš„æ„›ã€‚\n\nã€Œä½ æ„Ÿå—åˆ°äº†ï¼Œã€å¥¹æ„Ÿå‹•åœ°èªªï¼Œã€Œå¾ˆå°‘æœ‰äººèƒ½ç†è§£æˆ‘å°é€™ç‰‡åœŸåœ°çš„æ·±æƒ…ã€‚è¬è¬ä½ é¡˜æ„å‚¾è½æˆ‘çš„å¿ƒè²ã€‚ã€",
                "is_ending": true,
                "outcome": "ğŸ’ å¿ƒé¡˜çµå±€ï¼ä½ ç†è§£äº†è¾²å¤«å¥³éƒçš„çœŸå¿ƒï¼Œå»ºç«‹äº†å¿ƒéˆçš„é»˜å¥‘ï¼\n\nä½ ç²å¾—äº†ã€å¿ƒéˆå‚¾è½è€…ã€çš„ç¨±è™Ÿï¼Œå­¸æœƒäº†çœŸæ­£ç†è§£ä»–äººçš„èƒ½åŠ›ã€‚",
                "score": 80
            }
        };

        // è¼‰å…¥éŠæˆ²è³‡æ–™
        function loadGameData() {
            const saved = localStorage.getItem('tsextAdventureData');
            if (saved) {
                const data = JSON.parse(saved);
                gameState.unlockedAchievements = new Set(data.unlockedAchievements || []);
                gameState.unlockedBadges = new Set(data.unlockedBadges || []);
                gameState.playCount = data.playCount || 0;
                gameState.totalScore = data.totalScore || 0;
                gameState.allEndingsUnlocked = new Set(data.allEndingsUnlocked || []);
                gameState.allScenesVisited = new Set(data.allScenesVisited || []);
                gameState.punsTriggered = new Set(data.punsTriggered || []);
            }
        }

        // å„²å­˜éŠæˆ²è³‡æ–™
        function saveGameData() {
            const data = {
                unlockedAchievements: Array.from(gameState.unlockedAchievements),
                unlockedBadges: Array.from(gameState.unlockedBadges),
                playCount: gameState.playCount,
                totalScore: gameState.totalScore,
                allEndingsUnlocked: Array.from(gameState.allEndingsUnlocked),
                allScenesVisited: Array.from(gameState.allScenesVisited),
                punsTriggered: Array.from(gameState.punsTriggered)
            };
            localStorage.setItem('tsextAdventureData', JSON.stringify(data));
        }

        // æª¢æŸ¥æˆå°±
        function checkAchievements(sceneId) {
            const newAchievements = [];
            
            // æª¢æŸ¥çµå±€æˆå°±
            if (storyData[sceneId] && storyData[sceneId].is_ending) {
                const endingCondition = `ending_${sceneId}`;
                for (const [achievementId, achievement] of Object.entries(achievementsData)) {
                    if (achievement.condition === endingCondition && !gameState.unlockedAchievements.has(achievementId)) {
                        gameState.unlockedAchievements.add(achievementId);
                        newAchievements.push(achievementId);
                    }
                }
            }

            // æª¢æŸ¥ç‰¹æ®Šæˆå°±
            checkSpecialAchievements();

            // é¡¯ç¤ºæ–°æˆå°±
            newAchievements.forEach(achievementId => {
                showAchievementPopup(achievementId);
            });

            // æ›´æ–°æˆå°±é¢æ¿
            updateAchievementsPanel();
            updateStatsPanel();
            saveGameData();
        }

        // æª¢æŸ¥ç‰¹æ®Šæˆå°±
        function checkSpecialAchievements() {
            // æ¢ç´¢è€…æˆå°±
            if (gameState.visitedScenes.size >= 15 && !gameState.unlockedAchievements.has('explorer')) {
                gameState.unlockedAchievements.add('explorer');
                showAchievementPopup('explorer');
            }

            // å®Œç¾ä¸»ç¾©è€…æˆå°± - ç¾åœ¨æœ‰æ›´å¤šçµå±€äº†
            if (gameState.allEndingsUnlocked.size >= 20 && !gameState.unlockedAchievements.has('completionist')) {
                gameState.unlockedAchievements.add('completionist');
                showAchievementPopup('completionist');
            }

            // é€Ÿåº¦æƒ¡é­”æˆå°±
            if (gameState.gameStartTime) {
                const playTime = (Date.now() - gameState.gameStartTime) / 1000 / 60; // åˆ†é˜
                if (playTime <= 5 && !gameState.unlockedAchievements.has('speed_demon')) {
                    gameState.unlockedAchievements.add('speed_demon');
                    showAchievementPopup('speed_demon');
                }
            }

            // è¬è–ç¯€å‚³å¥‡æˆå°±
            if (gameState.totalScore >= 1000 && !gameState.unlockedAchievements.has('halloween_legend')) {
                gameState.unlockedAchievements.add('halloween_legend');
                showAchievementPopup('halloween_legend');
            }

            // è²“èªè€…æˆå°± - è§£é–æ‰€æœ‰è²“å’ªç›¸é—œçµå±€
            const catEndings = ['cat_adventure', 'cat_lady_romance', 'witch_cat_threesome'];
            if (catEndings.every(ending => gameState.allEndingsUnlocked.has(ending)) && 
                !gameState.unlockedAchievements.has('cat_whisperer')) {
                gameState.unlockedAchievements.add('cat_whisperer');
                showAchievementPopup('cat_whisperer');
            }

            // éˆèªè€…æˆå°± - è§£é–æ‰€æœ‰é¬¼é­‚ç›¸é—œçµå±€
            const ghostEndings = ['cold_encounter', 'ghost_intimacy', 'gentle_approach', 'ghost_friendship', 
                                'ghost_understanding', 'final_chase', 'ghost_conversation', 'soul_resonance', 
                                'floating_lessons', 'wall_phasing'];
            if (ghostEndings.filter(ending => gameState.allEndingsUnlocked.has(ending)).length >= 6 && 
                !gameState.unlockedAchievements.has('ghost_whisperer')) {
                gameState.unlockedAchievements.add('ghost_whisperer');
                showAchievementPopup('ghost_whisperer');
            }

            // å—ç“œè³¢è€…æˆå°± - è§£é–æ‰€æœ‰å—ç“œé­”æ³•çµå±€
            const pumpkinEndings = ['heart_to_heart', 'physical_attraction', 'big_pumpkin_fun', 
                                  'purple_pumpkin_mystery', 'silver_pumpkin_wish'];
            if (pumpkinEndings.filter(ending => gameState.allEndingsUnlocked.has(ending)).length >= 3 && 
                !gameState.unlockedAchievements.has('pumpkin_sage')) {
                gameState.unlockedAchievements.add('pumpkin_sage');
                showAchievementPopup('pumpkin_sage');
            }

            // æµªæ¼«å°ˆå®¶æˆå°± - é”æˆæ‰€æœ‰é«˜åˆ†æµªæ¼«çµå±€
            const romanceEndings = ['rooftop_romance', 'moonlight_adventure', 'heart_to_heart', 
                                  'physical_attraction', 'cat_lady_romance', 'witch_cat_threesome',
                                  'rose_blooms', 'ghost_intimacy', 'soul_resonance'];
            if (romanceEndings.filter(ending => gameState.allEndingsUnlocked.has(ending)).length >= 5 && 
                !gameState.unlockedAchievements.has('romance_expert')) {
                gameState.unlockedAchievements.add('romance_expert');
                showAchievementPopup('romance_expert');
            }

            // å†’éšªå°‹æ±‚è€…æˆå°± - å˜—è©¦äº†æ‰€æœ‰ä¸»è¦åˆ†æ”¯
            const adventureScenes = ['witch_encounter', 'haunted_house', 'pumpkin_patch', 'cat_encounter', 
                                   'ghost_touch', 'ghost_chase', 'pumpkin_magic', 'ghost_lessons'];
            if (adventureScenes.filter(scene => gameState.allScenesVisited.has(scene)).length >= 6 && 
                !gameState.unlockedAchievements.has('adventure_seeker')) {
                gameState.unlockedAchievements.add('adventure_seeker');
                showAchievementPopup('adventure_seeker');
            }
        }

        // æª¢æŸ¥å¾½ç« 
        function checkBadges() {
            const newBadges = [];
            const now = new Date();
            const hour = now.getHours();
            const day = now.getDay();

            // ç¬¬ä¸€æ¬¡éŠç©
            if (gameState.playCount === 1 && !gameState.unlockedBadges.has('first_play')) {
                gameState.unlockedBadges.add('first_play');
                newBadges.push('first_play');
            }

            // å¤œè²“å­
            if ((hour >= 22 || hour <= 2) && !gameState.unlockedBadges.has('night_owl')) {
                gameState.unlockedBadges.add('night_owl');
                newBadges.push('night_owl');
            }

            // æ—©èµ·é³¥
            if (hour >= 5 && hour <= 8 && !gameState.unlockedBadges.has('early_bird')) {
                gameState.unlockedBadges.add('early_bird');
                newBadges.push('early_bird');
            }

            // é€±æœ«æˆ°å£«
            if ((day === 0 || day === 6) && !gameState.unlockedBadges.has('weekend_warrior')) {
                gameState.unlockedBadges.add('weekend_warrior');
                newBadges.push('weekend_warrior');
            }

            // é‡è¤‡ç©å®¶
            if (gameState.playCount >= 5 && !gameState.unlockedBadges.has('repeat_player')) {
                gameState.unlockedBadges.add('repeat_player');
                newBadges.push('repeat_player');
            }

            // åˆå¤œé­”æ³•
            if (hour === 0 && !gameState.unlockedBadges.has('midnight_magic')) {
                gameState.unlockedBadges.add('midnight_magic');
                newBadges.push('midnight_magic');
            }

            return newBadges;
        }

        // é¡¯ç¤ºæˆå°±å½ˆçª—
        function showAchievementPopup(achievementId) {
            const achievement = achievementsData[achievementId];
            if (!achievement) return;

            const overlay = document.createElement('div');
            overlay.className = 'overlay';
            overlay.onclick = () => closeAchievementPopup();

            const popup = document.createElement('div');
            popup.className = 'achievement-popup';
            popup.innerHTML = `
                <div class="achievement-icon">${achievement.icon}</div>
                <div class="achievement-title">ğŸ† æˆå°±è§£é–ï¼</div>
                <div class="achievement-description">${achievement.name}</div>
                <div class="achievement-rarity rarity-${achievement.rarity}">${achievement.rarity.toUpperCase()}</div>
                <div class="achievement-description">${achievement.description}</div>
                <div class="achievement-actions">
                    <button class="share-btn" onclick="downloadAchievementImage('${achievementId}')">ä¸‹è¼‰åœ–ç‰‡ ğŸ“¥</button>
                    <button class="share-btn" onclick="shareAchievement('${achievementId}')">åˆ†äº«æˆå°± ğŸ“¤</button>
                    <button class="close-btn" onclick="closeAchievementPopup()">é—œé–‰</button>
                </div>
            `;

            document.body.appendChild(overlay);
            document.body.appendChild(popup);

            // 3ç§’å¾Œè‡ªå‹•é—œé–‰
            setTimeout(() => {
                if (document.body.contains(popup)) {
                    closeAchievementPopup();
                }
            }, 5000);
        }

        // é—œé–‰æˆå°±å½ˆçª—
        function closeAchievementPopup() {
            const overlay = document.querySelector('.overlay');
            const popup = document.querySelector('.achievement-popup');
            if (overlay) overlay.remove();
            if (popup) popup.remove();
        }

        // åˆ†äº«æˆå°±
        function shareAchievement(achievementId) {
            const achievement = achievementsData[achievementId];
            const shareText = `ğŸƒ æˆ‘åœ¨ Tsext Adventure: Halloween Haunt ä¸­è§£é–äº†æˆå°±ã€Œ${achievement.name}ã€ï¼\n\n${achievement.description}\n\n#TsextAdventure #HalloweenHaunt #NSFWGame`;
            const shareUrl = window.location.href;

            showShareModal(shareText, shareUrl, achievement);
        }

        // ä¸‹è¼‰æˆå°±åœ–ç‰‡
        function downloadAchievementImage(achievementId) {
            const achievement = achievementsData[achievementId];
            if (!achievement) return;

            // å‰µå»º canvas å…ƒç´ 
            const canvas = document.createElement('canvas');
            const ctx = canvas.getContext('2d');
            
            // è¨­å®š canvas å°ºå¯¸ (ç¤¾äº¤åª’é«”é©ç”¨å°ºå¯¸)
            canvas.width = 800;
            canvas.height = 600;

            // å‰µå»ºæ¼¸å±¤èƒŒæ™¯
            const gradient = ctx.createLinearGradient(0, 0, canvas.width, canvas.height);
            gradient.addColorStop(0, '#1a1a2e');
            gradient.addColorStop(0.5, '#16213e');
            gradient.addColorStop(1, '#0f3460');
            
            ctx.fillStyle = gradient;
            ctx.fillRect(0, 0, canvas.width, canvas.height);

            // æ·»åŠ é‚Šæ¡†æ•ˆæœ
            ctx.strokeStyle = '#ff6b35';
            ctx.lineWidth = 8;
            ctx.strokeRect(20, 20, canvas.width - 40, canvas.height - 40);

            // å…§å±¤é‚Šæ¡†
            ctx.strokeStyle = 'rgba(139, 92, 246, 0.8)';
            ctx.lineWidth = 4;
            ctx.strokeRect(40, 40, canvas.width - 80, canvas.height - 80);

            // éŠæˆ²æ¨™é¡Œ
            ctx.fillStyle = '#ff6b35';
            ctx.font = 'bold 32px "Courier New", monospace';
            ctx.textAlign = 'center';
            ctx.fillText('ğŸƒ Tsext Adventure: Halloween Haunt ğŸƒ', canvas.width / 2, 100);

            // æˆå°±è§£é–æ–‡å­—
            ctx.fillStyle = '#8b5cf6';
            ctx.font = 'bold 24px "Courier New", monospace';
            ctx.fillText('ğŸ† æˆå°±è§£é–ï¼', canvas.width / 2, 150);

            // æˆå°±åœ–æ¨™ (æ”¾å¤§)
            ctx.font = '120px Arial';
            ctx.fillText(achievement.icon, canvas.width / 2, 280);

            // æˆå°±åç¨±
            ctx.fillStyle = '#ff6b35';
            ctx.font = 'bold 36px "Courier New", monospace';
            ctx.fillText(achievement.name, canvas.width / 2, 350);

            // ç¨€æœ‰åº¦æ¨™ç±¤
            const rarityColors = {
                'common': '#9CA3AF',
                'rare': '#3B82F6', 
                'epic': '#8B5CF6',
                'legendary': '#F59E0B'
            };
            
            ctx.fillStyle = rarityColors[achievement.rarity] || '#9CA3AF';
            ctx.font = 'bold 20px "Courier New", monospace';
            ctx.fillText(`ã€ ${achievement.rarity.toUpperCase()} ã€‘`, canvas.width / 2, 390);

            // æˆå°±æè¿° (è‡ªå‹•æ›è¡Œ)
            ctx.fillStyle = '#e0e0e0';
            ctx.font = '18px "Courier New", monospace';
            const maxWidth = canvas.width - 120;
            const lineHeight = 25;
            const words = achievement.description.split('');
            let line = '';
            let y = 440;

            for (let i = 0; i < words.length; i++) {
                const testLine = line + words[i];
                const metrics = ctx.measureText(testLine);
                const testWidth = metrics.width;
                
                if (testWidth > maxWidth && i > 0) {
                    ctx.fillText(line, canvas.width / 2, y);
                    line = words[i];
                    y += lineHeight;
                } else {
                    line = testLine;
                }
            }
            ctx.fillText(line, canvas.width / 2, y);

            // åˆ†æ•¸è³‡è¨Š
            if (achievement.points) {
                ctx.fillStyle = '#ffd700';
                ctx.font = 'bold 20px "Courier New", monospace';
                ctx.fillText(`ğŸ’ ${achievement.points} åˆ†`, canvas.width / 2, y + 50);
            }

            // åº•éƒ¨è£é£¾
            ctx.fillStyle = '#8b5cf6';
            ctx.font = '16px "Courier New", monospace';
            ctx.fillText('github.com/dennislee928/tsext-adventure', canvas.width / 2, canvas.height - 50);

            // ä¸‹è¼‰åœ–ç‰‡
            const link = document.createElement('a');
            link.download = `tsext-adventure-achievement-${achievement.name.replace(/[^a-zA-Z0-9]/g, '_')}.png`;
            link.href = canvas.toDataURL('image/png');
            link.click();

            // é¡¯ç¤ºæˆåŠŸæç¤º
            showSuccessNotification(`ğŸ‰ æˆå°±åœ–ç‰‡å·²ä¸‹è¼‰ï¼š${achievement.name}`);
        }

        // é¡¯ç¤ºæˆåŠŸé€šçŸ¥
        function showSuccessNotification(message) {
            const notification = document.createElement('div');
            notification.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                background: linear-gradient(135deg, #10b981, #059669);
                color: white;
                padding: 15px 20px;
                border-radius: 10px;
                box-shadow: 0 4px 15px rgba(16, 185, 129, 0.4);
                z-index: 10000;
                font-family: 'Courier New', monospace;
                font-weight: bold;
                animation: slideInRight 0.3s ease-out;
            `;
            notification.textContent = message;
            
            // æ·»åŠ å‹•ç•«æ¨£å¼
            if (!document.getElementById('notification-style')) {
                const style = document.createElement('style');
                style.id = 'notification-style';
                style.textContent = `
                    @keyframes slideInRight {
                        from { transform: translateX(100%); opacity: 0; }
                        to { transform: translateX(0); opacity: 1; }
                    }
                    @keyframes slideOutRight {
                        from { transform: translateX(0); opacity: 1; }
                        to { transform: translateX(100%); opacity: 0; }
                    }
                `;
                document.head.appendChild(style);
            }

            document.body.appendChild(notification);

            // 3 ç§’å¾Œè‡ªå‹•ç§»é™¤
            setTimeout(() => {
                notification.style.animation = 'slideOutRight 0.3s ease-in';
                setTimeout(() => notification.remove(), 300);
            }, 3000);
        }

        // é¡¯ç¤ºåˆ†äº«æ¨¡æ…‹æ¡†
        function showShareModal(text, url, achievement) {
            const overlay = document.createElement('div');
            overlay.className = 'overlay';
            overlay.onclick = () => closeShareModal();

            const modal = document.createElement('div');
            modal.className = 'achievement-popup';
            modal.innerHTML = `
                <div class="achievement-icon">${achievement.icon}</div>
                <div class="achievement-title">åˆ†äº«æˆå°±</div>
                <div class="achievement-description">é¸æ“‡åˆ†äº«å¹³å°ï¼š</div>
                <div class="achievement-actions">
                    ${Object.entries(socialPlatforms).map(([platformId, platform]) => `
                        <button class="share-btn" onclick="shareToPlatform('${platformId}', '${encodeURIComponent(text)}', '${encodeURIComponent(url)}')">
                            ${platform.icon} ${platform.name}
                        </button>
                    `).join('')}
                    <button class="close-btn" onclick="closeShareModal()">å–æ¶ˆ</button>
                </div>
            `;

            document.body.appendChild(overlay);
            document.body.appendChild(modal);
        }

        // é—œé–‰åˆ†äº«æ¨¡æ…‹æ¡†
        function closeShareModal() {
            const overlay = document.querySelector('.overlay');
            const modal = document.querySelector('.achievement-popup');
            if (overlay) overlay.remove();
            if (modal) modal.remove();
        }

        // åˆ†äº«åˆ°å¹³å°
        function shareToPlatform(platformId, text, url) {
            const platform = socialPlatforms[platformId];
            let shareUrl = '';

            switch (platformId) {
                case 'twitter':
                    shareUrl = `${platform.url}?text=${text}&url=${url}`;
                    break;
                case 'facebook':
                    shareUrl = `${platform.url}?u=${url}&quote=${text}`;
                    break;
                case 'instagram':
                    // Instagram éœ€è¦æ‰‹å‹•è¤‡è£½
                    navigator.clipboard.writeText(`${text}\n\n${url}`);
                    alert('å·²è¤‡è£½åˆ°å‰ªè²¼æ¿ï¼è«‹åœ¨ Instagram ä¸­è²¼ä¸Šã€‚');
                    return;
                case 'threads':
                    shareUrl = `${platform.url}?text=${text}`;
                    break;
                case 'line':
                    shareUrl = `${platform.url}?url=${url}&text=${text}`;
                    break;
                case 'reddit':
                    shareUrl = `${platform.url}?url=${url}&title=${text}`;
                    break;
                case 'telegram':
                    shareUrl = `${platform.url}?url=${url}&text=${text}`;
                    break;
                default:
                    // è¤‡è£½åˆ°å‰ªè²¼æ¿
                    navigator.clipboard.writeText(`${text}\n\n${url}`);
                    alert('å·²è¤‡è£½åˆ°å‰ªè²¼æ¿ï¼');
                    return;
            }

            window.open(shareUrl, '_blank', 'width=600,height=400');
            closeShareModal();
        }

        // åˆ‡æ›æˆå°±é¢æ¿
        function toggleAchievementsPanel() {
            const panel = document.getElementById('achievementsPanel');
            const toggle = document.getElementById('achievementsToggle');
            
            if (panel.classList.contains('open')) {
                panel.classList.remove('open');
                if (toggle) {
                    toggle.style.right = '0';
                }
            } else {
                panel.classList.add('open');
                if (toggle) {
                    toggle.style.right = '300px';
                }
            }
        }

        // æ›´æ–°æˆå°±é¢æ¿
        function updateAchievementsPanel() {
            const panel = document.getElementById('achievementsList');
            if (!panel) return;

            const unlockedCount = gameState.unlockedAchievements.size;
            const totalCount = Object.keys(achievementsData).length;
            
            let html = `
                <div style="text-align: center; margin-bottom: 15px; padding: 10px; background: rgba(139, 92, 246, 0.2); border-radius: 8px;">
                    <div style="font-size: 1.5em; color: #ff6b35; font-weight: bold;">${unlockedCount} / ${totalCount}</div>
                    <div style="font-size: 0.9em; color: #e0e0e0;">å·²è§£é–æˆå°±</div>
                </div>
            `;

            html += Object.entries(achievementsData).map(([achievementId, achievement]) => {
                const isUnlocked = gameState.unlockedAchievements.has(achievementId);
                return `
                    <div class="achievement-item ${isUnlocked ? 'unlocked' : ''}" style="opacity: ${isUnlocked ? '1' : '0.5'}">
                        <div class="achievement-item-icon">${achievement.icon}</div>
                        <div class="achievement-item-text">
                            <div class="achievement-item-name">${achievement.name}</div>
                            <div class="achievement-item-desc">${achievement.description}</div>
                            ${isUnlocked ? '<div style="font-size: 0.7em; color: #ff6b35; margin-top: 3px;">âœ“ å·²è§£é–</div>' : '<div style="font-size: 0.7em; color: #666; margin-top: 3px;">ğŸ”’ æœªè§£é–</div>'}
                        </div>
                        ${isUnlocked ? `
                            <div class="achievement-item-actions" style="display: flex; flex-direction: column; gap: 5px; margin-left: 10px;">
                                <button onclick="downloadAchievementImage('${achievementId}')" style="background: #ff6b35; border: none; border-radius: 15px; padding: 5px 10px; color: white; font-size: 0.7em; cursor: pointer; transition: all 0.2s; min-width: 60px;" onmouseover="this.style.background='#e55a2e'" onmouseout="this.style.background='#ff6b35'">ğŸ“¥ ä¸‹è¼‰</button>
                                <button onclick="shareAchievement('${achievementId}')" style="background: #8b5cf6; border: none; border-radius: 15px; padding: 5px 10px; color: white; font-size: 0.7em; cursor: pointer; transition: all 0.2s; min-width: 60px;" onmouseover="this.style.background='#7c3aed'" onmouseout="this.style.background='#8b5cf6'">ğŸ“¤ åˆ†äº«</button>
                            </div>
                        ` : ''}
                    </div>
                `;
            }).join('');

            panel.innerHTML = html;
        }

        // æ›´æ–°çµ±è¨ˆé¢æ¿
        function updateStatsPanel() {
            document.getElementById('totalScore').textContent = gameState.totalScore;
            document.getElementById('playCount').textContent = gameState.playCount;
            document.getElementById('achievementCount').textContent = gameState.unlockedAchievements.size;
            document.getElementById('sceneCount').textContent = gameState.visitedScenes.size;
        }

        // é–‹å§‹éŠæˆ²
        function startGame() {
            const playerName = document.getElementById('playerName').value.trim();
            if (!playerName) {
                alert('è«‹è¼¸å…¥ä½ çš„åå­—ï¼');
                return;
            }

            gameState.playerName = playerName;
            gameState.currentScene = 'start';
            gameState.score = 0;
            gameState.visitedScenes.clear();
            gameState.gameStartTime = Date.now();
            gameState.playCount++;

            // æª¢æŸ¥å¾½ç« 
            const newBadges = checkBadges();
            if (newBadges.length > 0) {
                newBadges.forEach(badgeId => {
                    const badge = badgesData[badgeId];
                    alert(`ğŸ† ç²å¾—å¾½ç« ï¼š${badge.name} - ${badge.description}`);
                });
            }

            document.getElementById('startScreen').style.display = 'none';
            document.getElementById('statsPanel').style.display = 'block';
            document.getElementById('achievementsToggle').style.display = 'block';
            
            updateStatsPanel();
            updateAchievementsPanel();
            saveGameData();
            displayScene('start');
        }

        // é¡¯ç¤ºå ´æ™¯
        function displayScene(sceneId) {
            const scene = storyData[sceneId];
            if (!scene) {
                alert('æ‰¾ä¸åˆ°å ´æ™¯è³‡æ–™ï¼');
                return;
            }

            gameState.visitedScenes.add(sceneId);
            gameState.allScenesVisited.add(sceneId);

            let html = `
                <div class="scene-title">ğŸƒ ${scene.title} ğŸƒ</div>
                <div class="scene-description">${scene.description.replace(/\n/g, '<br>')}</div>
            `;

            if (scene.is_ending) {
                gameState.score += scene.score || 0;
                gameState.totalScore += scene.score || 0;
                gameState.allEndingsUnlocked.add(sceneId);
                
                // æª¢æŸ¥æˆå°±
                checkAchievements(sceneId);

                html += `
                    <div class="ending">
                        <div class="ending-title">ğŸ­ çµå±€ï¼š${scene.title}</div>
                        <div class="ending-outcome">${scene.outcome.replace(/\n/g, '<br>')}</div>
                        <div class="score">ğŸ† ä½ çš„åˆ†æ•¸ï¼š${gameState.score}</div>
                        <div class="score">ğŸ“ æ¢ç´¢å ´æ™¯æ•¸ï¼š${gameState.visitedScenes.size}</div>
                        <div class="score">ğŸ¯ ç¸½åˆ†æ•¸ï¼š${gameState.totalScore}</div>
                        <button class="restart-btn" onclick="restartGame()">é‡æ–°é–‹å§‹ ğŸƒ</button>
                    </div>
                `;
            } else if (scene.choices) {
                html += '<div class="choices">';
                scene.choices.forEach((choice, index) => {
                    html += `
                        <div class="choice" onclick="makeChoice('${choice.next_scene}')">
                            ${choice.option}
                        </div>
                    `;
                });
                html += '</div>';
            }

            document.getElementById('gameArea').innerHTML = html;
        }

        // åšå‡ºé¸æ“‡
        function makeChoice(nextScene) {
            displayScene(nextScene);
        }

        // é‡æ–°é–‹å§‹éŠæˆ²
        function restartGame() {
            gameState.currentScene = 'start';
            gameState.score = 0;
            gameState.visitedScenes.clear();
            gameState.gameStartTime = Date.now();
            gameState.playCount++;

            // æª¢æŸ¥å¾½ç« 
            const newBadges = checkBadges();
            if (newBadges.length > 0) {
                newBadges.forEach(badgeId => {
                    const badge = badgesData[badgeId];
                    alert(`ğŸ† ç²å¾—å¾½ç« ï¼š${badge.name} - ${badge.description}`);
                });
            }

            updateStatsPanel();
            saveGameData();
            displayScene('start');
        }

        // ç‰ˆæœ¬æª¢æŸ¥å’Œå¿«å–ç®¡ç†
        function checkVersion() {
            const currentVersion = document.querySelector('meta[name="version"]')?.content;
            const lastVersion = localStorage.getItem('gameVersion');
            
            if (currentVersion && lastVersion && currentVersion !== lastVersion) {
                // ç‰ˆæœ¬å·²æ›´æ–°ï¼Œæ¸…é™¤å¿«å–
                console.log('ğŸ”„ åµæ¸¬åˆ°æ–°ç‰ˆæœ¬ï¼Œæ¸…é™¤æœ¬åœ°å¿«å–...');
                if ('serviceWorker' in navigator) {
                    navigator.serviceWorker.getRegistrations().then(function(registrations) {
                        for(let registration of registrations) {
                            registration.unregister();
                        }
                    });
                }
                
                // æ¸…é™¤å¿«å–å„²å­˜
                if ('caches' in window) {
                    caches.keys().then(function(cacheNames) {
                        return Promise.all(
                            cacheNames.map(function(cacheName) {
                                return caches.delete(cacheName);
                            })
                        );
                    });
                }
                
                showSuccessNotification('ğŸ‰ éŠæˆ²å·²æ›´æ–°åˆ°æœ€æ–°ç‰ˆæœ¬ï¼');
            }
            
            if (currentVersion) {
                localStorage.setItem('gameVersion', currentVersion);
            }
        }

        // å¼·åˆ¶é‡æ–°è¼‰å…¥åŠŸèƒ½ï¼ˆé–‹ç™¼è€…ç”¨ï¼‰
        function forceReload() {
            if ('serviceWorker' in navigator) {
                navigator.serviceWorker.getRegistrations().then(function(registrations) {
                    for(let registration of registrations) {
                        registration.unregister();
                    }
                    location.reload(true);
                });
            } else {
                location.reload(true);
            }
        }

        // æª¢æŸ¥ç¶²è·¯é€£ç·šå’Œç‰ˆæœ¬æ›´æ–°
        function checkForUpdates() {
            if (navigator.onLine) {
                // éš¨æ©Ÿåƒæ•¸é¿å…å¿«å–
                const timestamp = new Date().getTime();
                fetch(`./version.json?v=${timestamp}`, { 
                    cache: 'no-cache',
                    headers: {
                        'Cache-Control': 'no-cache, no-store, must-revalidate',
                        'Pragma': 'no-cache',
                        'Expires': '0'
                    }
                })
                .then(response => response.json())
                .then(data => {
                    const currentVersion = document.querySelector('meta[name="version"]')?.content;
                    if (data.version && currentVersion && data.version !== currentVersion) {
                        if (confirm('ç™¼ç¾æ–°ç‰ˆæœ¬ï¼æ˜¯å¦è¦é‡æ–°è¼‰å…¥éŠæˆ²ï¼Ÿ')) {
                            forceReload();
                        }
                    }
                })
                .catch(error => {
                    console.log('ç‰ˆæœ¬æª¢æŸ¥å¤±æ•—:', error);
                });
            }
        }

        // åˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', function() {
            loadGameData();
            updateAchievementsPanel();
            updateStatsPanel();
            checkVersion();
            console.log('ğŸƒ Tsext Adventure: Halloween Haunt å·²è¼‰å…¥ï¼');
            
            // æ¯ 5 åˆ†é˜æª¢æŸ¥ä¸€æ¬¡æ›´æ–°
            setInterval(checkForUpdates, 5 * 60 * 1000);
        });
    </script>
</body>
</html>
