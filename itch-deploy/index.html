<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tsext Adventure: Halloween Haunt</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Courier New', monospace;
            background: linear-gradient(135deg, #1a1a2e, #16213e, #0f3460);
            color: #fff;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 20px;
        }

        .container {
            max-width: 800px;
            width: 100%;
            background: rgba(0, 0, 0, 0.8);
            border-radius: 15px;
            padding: 30px;
            box-shadow: 0 0 30px rgba(255, 107, 53, 0.3);
            border: 2px solid #ff6b35;
        }

        .header {
            text-align: center;
            margin-bottom: 30px;
        }

        .title {
            font-size: 2.5em;
            color: #ff6b35;
            text-shadow: 0 0 10px #ff6b35;
            margin-bottom: 10px;
        }

        .subtitle {
            font-size: 1.2em;
            color: #8b5cf6;
            margin-bottom: 20px;
        }

        .warning {
            background: rgba(255, 107, 53, 0.2);
            border: 1px solid #ff6b35;
            border-radius: 10px;
            padding: 15px;
            margin-bottom: 20px;
            text-align: center;
        }

        .game-area {
            min-height: 400px;
            background: rgba(0, 0, 0, 0.5);
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 20px;
            border: 1px solid #333;
        }

        .scene-title {
            font-size: 1.5em;
            color: #ff6b35;
            margin-bottom: 15px;
            text-align: center;
            border-bottom: 2px solid #ff6b35;
            padding-bottom: 10px;
        }

        .scene-description {
            font-size: 1.1em;
            line-height: 1.6;
            margin-bottom: 20px;
            color: #e0e0e0;
        }

        .choices {
            margin-top: 20px;
        }

        .choice {
            background: rgba(139, 92, 246, 0.2);
            border: 1px solid #8b5cf6;
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 1em;
        }

        .choice:hover {
            background: rgba(139, 92, 246, 0.4);
            transform: translateX(5px);
            box-shadow: 0 0 15px rgba(139, 92, 246, 0.5);
        }

        .ending {
            text-align: center;
            padding: 20px;
            background: rgba(255, 107, 53, 0.1);
            border-radius: 10px;
            border: 2px solid #ff6b35;
        }

        .ending-title {
            font-size: 1.8em;
            color: #ff6b35;
            margin-bottom: 15px;
        }

        .ending-outcome {
            font-size: 1.2em;
            line-height: 1.6;
            margin-bottom: 20px;
        }

        .score {
            font-size: 1.1em;
            color: #8b5cf6;
            margin-bottom: 15px;
        }

        .restart-btn {
            background: linear-gradient(45deg, #ff6b35, #8b5cf6);
            border: none;
            border-radius: 25px;
            padding: 12px 30px;
            color: white;
            font-size: 1.1em;
            cursor: pointer;
            transition: all 0.3s ease;
            margin: 10px;
        }

        .restart-btn:hover {
            transform: scale(1.05);
            box-shadow: 0 0 20px rgba(255, 107, 53, 0.5);
        }

        .start-screen {
            text-align: center;
        }

        .player-input {
            background: rgba(0, 0, 0, 0.5);
            border: 2px solid #8b5cf6;
            border-radius: 10px;
            padding: 15px;
            color: white;
            font-size: 1.1em;
            width: 100%;
            max-width: 300px;
            margin: 20px auto;
            text-align: center;
        }

        .start-btn {
            background: linear-gradient(45deg, #8b5cf6, #ff6b35);
            border: none;
            border-radius: 25px;
            padding: 15px 40px;
            color: white;
            font-size: 1.2em;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-top: 20px;
        }

        .start-btn:hover {
            transform: scale(1.05);
            box-shadow: 0 0 25px rgba(139, 92, 246, 0.5);
        }

        .footer {
            text-align: center;
            margin-top: 30px;
            color: #666;
            font-size: 0.9em;
        }

        .loading {
            text-align: center;
            color: #8b5cf6;
            font-size: 1.2em;
        }

        @media (max-width: 768px) {
            .container {
                padding: 20px;
                margin: 10px;
            }
            
            .title {
                font-size: 2em;
            }
            
            .scene-title {
                font-size: 1.3em;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1 class="title">ğŸƒ Tsext Adventure: Halloween Haunt ğŸƒ</h1>
            <p class="subtitle">è¬è–ç¯€ç‘Ÿç‘Ÿå†’éšªéŠæˆ²</p>
        </div>

        <div class="warning">
            âš ï¸ <strong>NSFW è­¦å‘Š</strong>ï¼šæœ¬éŠæˆ²åŒ…å«æˆäººæš—ç¤ºå’Œå¹½é»˜ï¼Œé©åˆ 18 æ­²ä»¥ä¸Šç©å®¶
        </div>

        <div class="game-area" id="gameArea">
            <div class="start-screen" id="startScreen">
                <h2>ğŸ‘» æ­¡è¿ä¾†åˆ°è¬è–ç¯€éˆç•°ç´„æœƒè¶´ï¼</h2>
                <p>æº–å‚™å¥½åƒåŠ æœ€åˆºæ¿€çš„è¬è–ç¯€å†’éšªäº†å—ï¼Ÿ</p>
                <input type="text" class="player-input" id="playerName" placeholder="è«‹è¼¸å…¥ä½ çš„åå­—" maxlength="20">
                <br>
                <button class="start-btn" onclick="startGame()">é–‹å§‹å†’éšª ğŸƒ</button>
            </div>
        </div>

        <div class="footer">
            <p>ğŸƒ Happy Halloween! ğŸƒ</p>
            <p>é–‹æºå°ˆæ¡ˆ | MIT License | <a href="https://github.com/yourusername/tsext-adventure" style="color: #8b5cf6;">GitHub</a></p>
        </div>
    </div>

    <script>
        // éŠæˆ²ç‹€æ…‹
        let gameState = {
            currentScene: 'start',
            playerName: '',
            score: 0,
            visitedScenes: new Set()
        };

        // æ•…äº‹è³‡æ–™
        const storyData = {
            "start": {
                "title": "è¬è–ç¯€éˆç•°ç´„æœƒè¶´å…¥å£",
                "description": "ä½ ç«™åœ¨ä¸€æ£Ÿé™°æ£®çš„è€å®…å‰ï¼Œé–€å£æ›è‘—ã€Œæ­¡è¿åƒåŠ è¬è–ç¯€éˆç•°ç´„æœƒè¶´ã€çš„ç‰Œå­ã€‚æœˆå…‰é€éçƒé›²ç‘ä¸‹ï¼Œå—ç“œç‡ˆåœ¨é¢¨ä¸­æ–æ›³ï¼Œç™¼å‡ºè©­ç•°çš„å…‰èŠ’ã€‚\n\nä½ è½åˆ°å±‹å…§å‚³ä¾†ç¬‘è²ã€éŸ³æ¨‚è²ï¼Œé‚„æœ‰ä¸€äº›... å¥‡æ€ªçš„è²éŸ³ã€‚é–€å£ç«™è‘—ä¸€å€‹ç©¿è‘—æ€§æ„Ÿå¥³å·«è£çš„æ¥å¾…å“¡ï¼Œå¥¹å°ä½ çœ¨äº†çœ¨çœ¼ã€‚",
                "choices": [
                    {"option": "A: å°å¥³å·«èªªã€Œä½ çš„æƒå¸šçœŸæ¼‚äº®ï¼Œèƒ½é¨å—ï¼Ÿã€", "next_scene": "witch_encounter"},
                    {"option": "B: ç›´æ¥é€²å…¥é¬¼å±‹æ¢éšª", "next_scene": "haunted_house"},
                    {"option": "C: å…ˆå»å—ç“œç”°çœ‹çœ‹", "next_scene": "pumpkin_patch"}
                ]
            },
            "witch_encounter": {
                "title": "å¥³å·«çš„èª˜æƒ‘",
                "description": "å¥³å·«å’¯å’¯ç¬‘è‘—èªªï¼šã€Œç•¶ç„¶å¯ä»¥é¨ï¼Œä½†ä½ è¦å°å¿ƒä¸è¦è¢«æƒå¸šæŸ„... ä½ çŸ¥é“çš„ã€‚ã€å¥¹æ®äº†æ®æ‰‹ï¼Œæƒå¸šçªç„¶é£›åˆ°ä½ é¢å‰ã€‚\n\nã€Œä¸éï¼Œã€å¥¹ç¥ç§˜åœ°ç¬‘è‘—ï¼Œã€Œæˆ‘çš„æƒå¸šå¾ˆæŒ‘å‰”ï¼Œåªæœ‰çœŸæ­£å‹‡æ•¢çš„äººæ‰èƒ½é§•é¦­å®ƒã€‚ã€",
                "choices": [
                    {"option": "A: å‹‡æ•¢åœ°è·¨ä¸Šæƒå¸š", "next_scene": "broom_ride_success"},
                    {"option": "B: èªªã€Œæˆ‘æ›´æƒ³é¨ä½ ã€", "next_scene": "witch_rejection"},
                    {"option": "C: å•ã€Œä½ çš„è²“å’ªåœ¨å“ªè£¡ï¼Ÿã€", "next_scene": "cat_encounter"}
                ]
            },
            "broom_ride_success": {
                "title": "æƒå¸šé£›è¡ŒæˆåŠŸ",
                "description": "ä½ æˆåŠŸè·¨ä¸Šæƒå¸šï¼Œå®ƒè¼‰è‘—ä½ åœ¨æœˆå…‰ä¸‹é£›ç¿”ï¼å¥³å·«åœ¨ä¸‹é¢é¼“æŒï¼šã€Œå¤ªæ£’äº†ï¼ä½ æ˜¯æˆ‘è¦‹éæœ€å‹‡æ•¢çš„é¨å£«ï¼ã€\n\nä½ å€‘ä¸€èµ·é£›åˆ°å±‹é ‚ï¼Œçœ‹è‘—ä¸‹é¢çš„æ´¾å°ã€‚å¥³å·«é è¿‘ä½ ï¼Œè¼•è²èªªï¼šã€Œç¾åœ¨... è®“æˆ‘å€‘åšä¸€äº›æ›´åˆºæ¿€çš„äº‹æƒ…ã€‚ã€",
                "choices": [
                    {"option": "A: åœ¨å±‹é ‚ä¸Šè¦ªå»å¥³å·«", "next_scene": "rooftop_romance"},
                    {"option": "B: æè­°ä¸€èµ·é£›åˆ°æ›´é çš„åœ°æ–¹", "next_scene": "moonlight_adventure"}
                ]
            },
            "rooftop_romance": {
                "title": "å±‹é ‚æµªæ¼«",
                "description": "åœ¨æœˆå…‰ä¸‹ï¼Œä½ å’Œå¥³å·«åœ¨å±‹é ‚ä¸Šæ“å»ã€‚å¥¹çš„å˜´å”‡æº«æš–è€Œç”œèœœï¼Œå¸¶è‘—é­”æ³•çš„å‘³é“ã€‚çªç„¶ï¼Œå¥¹æ¨é–‹ä½ ï¼Œç¬‘è‘—èªªï¼šã€Œç¾åœ¨è®“æˆ‘å€‘åšä¸€äº›çœŸæ­£çš„é­”æ³•ï¼ã€\n\nå¥¹æ®å‹•é­”æ–ï¼Œä½ å€‘å‘¨åœå‡ºç¾äº†é–ƒçˆçš„æ˜Ÿæ˜Ÿï¼Œæ•´å€‹ä¸–ç•Œéƒ½è®Šå¾—æµªæ¼«èµ·ä¾†ã€‚",
                "is_ending": true,
                "outcome": "ğŸ‰ å®Œç¾çµå±€ï¼ä½ å’Œå¥³å·«åœ¨é­”æ³•æ˜Ÿå…‰ä¸‹åº¦éäº†é›£å¿˜çš„è¬è–ç¯€å¤œæ™šï¼\n\nä½ ç²å¾—äº†ã€é­”æ³•é¨å£«ã€çš„ç¨±è™Ÿï¼Œä¸¦ä¸”å­¸æœƒäº†çœŸæ­£çš„æ„›æƒ…é­”æ³•ã€‚",
                "score": 100
            },
            "moonlight_adventure": {
                "title": "æœˆå…‰å†’éšª",
                "description": "ä½ å€‘é£›åˆ°æ›´é çš„åœ°æ–¹ï¼Œä¾†åˆ°ä¸€å€‹éš±ç§˜çš„æœˆå…‰æ¹–ã€‚å¥³å·«èªªï¼šã€Œé€™è£¡æ˜¯æˆ‘çš„ç§˜å¯†èŠ±åœ’ï¼Œåªæœ‰çœŸæ­£ç‰¹åˆ¥çš„äººæ‰èƒ½ä¾†åˆ°é€™è£¡ã€‚ã€\n\nåœ¨æœˆå…‰ä¸‹ï¼Œä½ å€‘ä¸€èµ·æ¢ç´¢è‘—å½¼æ­¤çš„å…§å¿ƒï¼Œåº¦éäº†æœ€æµªæ¼«çš„å¤œæ™šã€‚",
                "is_ending": true,
                "outcome": "ğŸŒ™ æµªæ¼«çµå±€ï¼ä½ å’Œå¥³å·«åœ¨æœˆå…‰æ¹–åº¦éäº†æœ€ç¾å¥½çš„æ™‚å…‰ï¼\n\nä½ ç²å¾—äº†ã€æœˆå…‰æˆ€äººã€çš„ç¨±è™Ÿï¼Œä¸¦ä¸”æ°¸é è¨˜ä½äº†é€™å€‹ç¥å¥‡çš„å¤œæ™šã€‚",
                "score": 90
            },
            "witch_rejection": {
                "title": "å¥³å·«çš„æ‹’çµ•",
                "description": "å¥³å·«çšºèµ·çœ‰é ­ï¼šã€Œä½ ä»¥ç‚ºæˆ‘æ˜¯ä»€éº¼ï¼Ÿéš¨ä¾¿çš„å¥³å·«å—ï¼Ÿã€å¥¹æ®å‹•é­”æ–ï¼Œä½ çªç„¶æ„Ÿè¦ºèº«é«”è®Šè¼•äº†...\n\nã€Œæ—¢ç„¶ä½ é€™éº¼ç„¡ç¦®ï¼Œå°±è®“ä½ é«”é©—ä¸€ä¸‹çœŸæ­£çš„ã€è¼•å¦‚ç¾½æ¯›ã€å§ï¼ã€ä½ é–‹å§‹é£„æµ®åœ¨ç©ºä¸­ï¼Œç„¡æ³•æ§åˆ¶æ–¹å‘ã€‚",
                "choices": [
                    {"option": "A: é“æ­‰ä¸¦è«‹æ±‚åŸè«’", "next_scene": "apology_accepted"},
                    {"option": "B: è©¦åœ–æŠ“ä½ä»€éº¼æ±è¥¿", "next_scene": "floating_mischief"}
                ]
            },
            "floating_mischief": {
                "title": "æ¼‚æµ®æƒ¡ä½œåŠ‡",
                "description": "ä½ è©¦åœ–æŠ“ä½ä»€éº¼æ±è¥¿ï¼Œä½†åªèƒ½åœ¨ç©ºä¸­é£„æµ®ã€‚å¥³å·«åœ¨ä¸‹é¢ç¬‘è‘—ï¼šã€Œé€™å°±æ˜¯ç„¡ç¦®çš„ä»£åƒ¹ï¼ã€\n\nçªç„¶ï¼Œä½ æ’åˆ°äº†ä¸€å€‹åŠç‡ˆï¼Œç‡ˆæ³¡çˆ†è£‚ï¼Œç«èŠ±å››æ¿ºã€‚å¥³å·«é©šå«ï¼šã€Œæˆ‘çš„å¤©ï¼å¿«ä¸‹ä¾†ï¼ã€å¥¹æ®å‹•é­”æ–ï¼Œä½ å®‰å…¨åœ°é™è½åˆ°åœ°é¢ã€‚",
                "is_ending": true,
                "outcome": "ğŸ’¥ æç¬‘çµå±€ï¼ä½ å› ç‚ºç„¡ç¦®è€Œæ¼‚æµ®ï¼Œæœ€å¾Œæ’å£äº†åŠç‡ˆï¼\n\né›–ç„¶çµå±€æœ‰é»å°·å°¬ï¼Œä½†è‡³å°‘ä½ å­¸æœƒäº†å°å¥³å·«è¦æœ‰ç¦®è²Œã€‚",
                "score": 30
            },
            "haunted_house": {
                "title": "é¬¼å±‹å…§éƒ¨",
                "description": "ä½ èµ°é€²é¬¼å±‹ï¼Œè£¡é¢ç‡ˆå…‰æ˜æš—ï¼Œç‰†ä¸Šæ›è‘—å¤è€çš„ç•«åƒã€‚çªç„¶ï¼Œä¸€å€‹åŠé€æ˜çš„é¬¼é­‚å¾ç‰†å£ä¸­é£„å‡ºä¾†ï¼\n\nã€Œæ­¡è¿ä¾†åˆ°æˆ‘çš„å®¶ï¼Œã€é¬¼é­‚èªªï¼Œã€Œæˆ‘æ˜¯é€™è£¡çš„ä¸»äººï¼Œå·²ç¶“æ­»äº† 200 å¹´äº†ã€‚ä½†æˆ‘é‚„æ˜¯å¾ˆ... æ´»èºã€‚ã€ä»–å°ä½ çœ¨äº†çœ¨çœ¼ã€‚",
                "choices": [
                    {"option": "A: èªªã€Œä½ çœ‹èµ·ä¾†å¾ˆå¯‚å¯ã€", "next_scene": "ghost_romance"},
                    {"option": "B: å•ã€Œä½ èƒ½è§¸æ‘¸å¯¦é«”å—ï¼Ÿã€", "next_scene": "ghost_touch"},
                    {"option": "C: è©¦åœ–é€ƒè·‘", "next_scene": "ghost_chase"}
                ]
            },
            "ghost_romance": {
                "title": "é¬¼é­‚çš„æµªæ¼«",
                "description": "é¬¼é­‚å˜†äº†å£æ°£ï¼šã€Œæ˜¯çš„ï¼Œæˆ‘ç¢ºå¯¦å¾ˆå¯‚å¯ã€‚200 å¹´ä¾†ï¼Œæ²’æœ‰äººé¡˜æ„å’Œæˆ‘... ä½ çŸ¥é“çš„ã€‚ã€ä»–çš„è²éŸ³å¸¶è‘—æ¸´æœ›ã€‚\n\nã€Œä½†æ˜¯ï¼Œã€ä»–çªç„¶èˆˆå¥®åœ°èªªï¼Œã€Œå¦‚æœä½ é¡˜æ„ï¼Œæˆ‘å¯ä»¥æ•™ä½ ä¸€äº›é¬¼é­‚çš„... ç‰¹æ®ŠæŠ€å·§ã€‚ã€",
                "choices": [
                    {"option": "A: èªªã€Œæˆ‘å¾ˆæ„Ÿèˆˆè¶£ã€", "next_scene": "ghost_lessons"},
                    {"option": "B: å•ã€Œæœƒä¸æœƒå¾ˆå†·ï¼Ÿã€", "next_scene": "cold_encounter"}
                ]
            },
            "cold_encounter": {
                "title": "å†°å†·çš„ç›¸é‡",
                "description": "é¬¼é­‚ç¬‘è‘—èªªï¼šã€Œä¸€é–‹å§‹æœƒæœ‰é»å†·ï¼Œä½†å¾ˆå¿«å°±æœƒè®Šæš–çš„ã€‚è®“æˆ‘ç¤ºç¯„çµ¦ä½ çœ‹...ã€\n\nä»–è¼•è¼•è§¸æ‘¸ä½ çš„æ‰‹ï¼Œä½ æ„Ÿè¦ºåˆ°ä¸€é™£æ¶¼æ„ï¼Œä½†åŒæ™‚åˆæœ‰ä¸€ç¨®å¥‡ç•°çš„æº«æš–ã€‚ä»–çš„è§¸æ‘¸è®“ä½ æ„Ÿåˆ°æ—¢åˆºæ¿€åˆèˆ’é©ã€‚",
                "is_ending": true,
                "outcome": "â„ï¸ å†°å†·çµå±€ï¼ä½ å’Œé¬¼é­‚åº¦éäº†å¥‡ç•°çš„å¤œæ™šï¼\n\né›–ç„¶æœ‰é»å†·ï¼Œä½†ä½ é«”é©—åˆ°äº†å‰æ‰€æœªæœ‰çš„æ„Ÿè¦ºã€‚",
                "score": 70
            },
            "pumpkin_patch": {
                "title": "å—ç“œç”°çš„èª˜æƒ‘",
                "description": "ä½ ä¾†åˆ°å—ç“œç”°ï¼Œæœˆå…‰ä¸‹çš„å¤§å—ç“œçœ‹èµ·ä¾†æ ¼å¤–èª˜äººã€‚çªç„¶ï¼Œä¸€å€‹ç©¿è‘—è¾²å¤«è£çš„æ€§æ„Ÿå¥³éƒå¾å—ç“œå¾Œé¢èµ°å‡ºä¾†ã€‚\n\nã€Œæ­¡è¿ä¾†åˆ°æˆ‘çš„å—ç“œç”°ï¼Œã€å¥¹èªªï¼Œã€Œæˆ‘æ˜¯é€™è£¡çš„å®ˆè­·è€…ã€‚é€™äº›å—ç“œéƒ½å¾ˆç‰¹åˆ¥... å®ƒå€‘æœƒå›æ‡‰ä½ çš„æ…¾æœ›ã€‚ã€",
                "choices": [
                    {"option": "A: å•ã€Œå—ç“œæœƒå›æ‡‰ä»€éº¼æ…¾æœ›ï¼Ÿã€", "next_scene": "pumpkin_magic"},
                    {"option": "B: èªªã€Œæˆ‘æ›´æƒ³äº†è§£ä½ ã€", "next_scene": "farmer_romance"}
                ]
            },
            "farmer_romance": {
                "title": "è¾²å¤«çš„æµªæ¼«",
                "description": "è¾²å¤«å¥³éƒå°ä½ çš„ç›´æ¥æ„Ÿåˆ°é©šè¨ï¼Œç„¶å¾Œç¬‘äº†ã€‚ã€Œä½ å¾ˆæœ‰è¶£ï¼Œã€å¥¹èªªï¼Œã€Œæˆ‘å–œæ­¡ç›´æ¥çš„äººã€‚ã€\n\nå¥¹é è¿‘ä½ ï¼Œè¼•è²èªªï¼šã€Œé‚£éº¼ï¼Œä½ æƒ³è¦äº†è§£æˆ‘çš„å“ªå€‹æ–¹é¢å‘¢ï¼Ÿã€å¥¹çš„çœ¼ç›é–ƒçˆè‘—èª˜æƒ‘çš„å…‰èŠ’ã€‚",
                "choices": [
                    {"option": "A: èªªã€Œæˆ‘æƒ³äº†è§£ä½ çš„å¿ƒã€", "next_scene": "heart_to_heart"},
                    {"option": "B: èªªã€Œæˆ‘æƒ³äº†è§£ä½ çš„èº«é«”ã€", "next_scene": "physical_attraction"}
                ]
            },
            "heart_to_heart": {
                "title": "å¿ƒéˆäº¤æµ",
                "description": "è¾²å¤«å¥³éƒå°ä½ çš„å›ç­”æ„Ÿåˆ°æ„Ÿå‹•ã€‚ã€Œä½ æ˜¯ä¸€å€‹çœŸæ­£çš„äººï¼Œã€å¥¹èªªï¼Œã€Œæˆ‘é¡˜æ„å’Œä½ åˆ†äº«æˆ‘çš„å…§å¿ƒã€‚ã€\n\nä½ å€‘ååœ¨å—ç“œç”°é‚Šï¼Œåˆ†äº«è‘—å½¼æ­¤çš„æ•…äº‹å’Œå¤¢æƒ³ï¼Œåº¦éäº†æœ€ç¾å¥½çš„æ™‚å…‰ã€‚",
                "is_ending": true,
                "outcome": "ğŸ’• å¿ƒéˆçµå±€ï¼ä½ å’Œè¾²å¤«å¥³éƒå»ºç«‹äº†æ·±åšçš„æƒ…æ„Ÿé€£æ¥ï¼\n\nä½ ç²å¾—äº†ã€å¿ƒéˆä¼´ä¾¶ã€çš„ç¨±è™Ÿï¼Œä¸¦ä¸”æ°¸é è¨˜ä½äº†é€™å€‹ç¾å¥½çš„å¤œæ™šã€‚",
                "score": 85
            },
            "physical_attraction": {
                "title": "èº«é«”å¸å¼•",
                "description": "è¾²å¤«å¥³éƒå°ä½ çš„ç›´æ¥æ„Ÿåˆ°èˆˆå¥®ã€‚ã€Œå¾ˆå¥½ï¼Œã€å¥¹èªªï¼Œã€Œæˆ‘å–œæ­¡èª å¯¦çš„äººã€‚ã€\n\nå¥¹æ‹‰è‘—ä½ çš„æ‰‹ï¼Œå¸¶ä½ åˆ°å—ç“œç”°çš„æ·±è™•ã€‚ã€Œè®“æˆ‘å€‘åšä¸€äº›çœŸæ­£æœ‰è¶£çš„äº‹æƒ…ï¼Œã€å¥¹è¼•è²èªªã€‚",
                "is_ending": true,
                "outcome": "ğŸ”¥ æ¿€æƒ…çµå±€ï¼ä½ å’Œè¾²å¤«å¥³éƒåº¦éäº†ç«ç†±çš„å¤œæ™šï¼\n\nä½ ç²å¾—äº†ã€æ¿€æƒ…æˆ€äººã€çš„ç¨±è™Ÿï¼Œä¸¦ä¸”æ°¸é è¨˜ä½äº†é€™å€‹å……æ»¿æ¿€æƒ…çš„å¤œæ™šã€‚",
                "score": 90
            }
        };

        // é–‹å§‹éŠæˆ²
        function startGame() {
            const playerName = document.getElementById('playerName').value.trim();
            if (!playerName) {
                alert('è«‹è¼¸å…¥ä½ çš„åå­—ï¼');
                return;
            }

            gameState.playerName = playerName;
            gameState.currentScene = 'start';
            gameState.score = 0;
            gameState.visitedScenes.clear();

            document.getElementById('startScreen').style.display = 'none';
            displayScene('start');
        }

        // é¡¯ç¤ºå ´æ™¯
        function displayScene(sceneId) {
            const scene = storyData[sceneId];
            if (!scene) {
                alert('æ‰¾ä¸åˆ°å ´æ™¯è³‡æ–™ï¼');
                return;
            }

            gameState.visitedScenes.add(sceneId);

            let html = `
                <div class="scene-title">ğŸƒ ${scene.title} ğŸƒ</div>
                <div class="scene-description">${scene.description.replace(/\n/g, '<br>')}</div>
            `;

            if (scene.is_ending) {
                html += `
                    <div class="ending">
                        <div class="ending-title">ğŸ­ çµå±€ï¼š${scene.title}</div>
                        <div class="ending-outcome">${scene.outcome.replace(/\n/g, '<br>')}</div>
                        <div class="score">ğŸ† ä½ çš„åˆ†æ•¸ï¼š${gameState.score + (scene.score || 0)}</div>
                        <div class="score">ğŸ“ æ¢ç´¢å ´æ™¯æ•¸ï¼š${gameState.visitedScenes.size}</div>
                        <button class="restart-btn" onclick="restartGame()">é‡æ–°é–‹å§‹ ğŸƒ</button>
                    </div>
                `;
                gameState.score += scene.score || 0;
            } else if (scene.choices) {
                html += '<div class="choices">';
                scene.choices.forEach((choice, index) => {
                    html += `
                        <div class="choice" onclick="makeChoice('${choice.next_scene}')">
                            ${choice.option}
                        </div>
                    `;
                });
                html += '</div>';
            }

            document.getElementById('gameArea').innerHTML = html;
        }

        // åšå‡ºé¸æ“‡
        function makeChoice(nextScene) {
            displayScene(nextScene);
        }

        // é‡æ–°é–‹å§‹éŠæˆ²
        function restartGame() {
            gameState.currentScene = 'start';
            gameState.score = 0;
            gameState.visitedScenes.clear();
            displayScene('start');
        }

        // éµç›¤äº‹ä»¶
        document.addEventListener('keydown', function(event) {
            if (event.key === 'Enter') {
                const playerInput = document.getElementById('playerName');
                if (playerInput && document.activeElement === playerInput) {
                    startGame();
                }
            }
        });

        // åˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', function() {
            console.log('ğŸƒ Tsext Adventure: Halloween Haunt å·²è¼‰å…¥ï¼');
        });
    </script>
</body>
</html>
